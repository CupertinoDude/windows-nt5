
BPB	STRUC
BPB_BytesPerSector	DW	?
BPB_SectorsPerCluster	DB	?
BPB_ReservedSectors	DW	?
BPB_NumberOfFATs	DB	?
BPB_RootEntries	DW	?
BPB_TotalSectors	DW	?
BPB_MediaDescriptor	DB	?
BPB_SectorsPerFAT	DW	?
BPB_SectorsPerTrack	DW	?
BPB_Heads	DW	?
BPB_HiddenSectors	DW	?
BPB_HiddenSectorsHigh	DW	?
BPB_BigTotalSectors	DW	?
BPB_BigTotalSectorsHigh	DW	?
BPB	ENDS

BIGFATBPB	STRUC
oldBPB	DB	SIZE BPB DUP (?)
BGBPB_BigSectorsPerFat	DW	?
BGBPB_BigSectorsPerFatHi	DW	?
BGBPB_ExtFlags	DW	?
BGBPB_FS_Version	DW	?
BGBPB_RootDirStrtClus	DW	?
BGBPB_RootDirStrtClusHi	DW	?
BGBPB_FSInfoSec	DW	?
BGBPB_BkUpBootSec	DW	?
BGBPB_Reserved	DW	6 DUP (?)
BIGFATBPB	ENDS
BGBPB_F_ActiveFATMsk	EQU	000FH
BGBPB_F_NoFATMirror	EQU	0080H
BGBPB_F_CompressedVol	EQU	0100H
FAT32_Curr_FS_Version	EQU	0000H
FAT32_Curr_Version	EQU	FAT32_Curr_FS_Version

A_BPB	STRUC
A_BPB_BytesPerSector	DW	?
A_BPB_SectorsPerCluster	DB	?
A_BPB_ReservedSectors	DW	?
A_BPB_NumberOfFATs	DB	?
A_BPB_RootEntries	DW	?
A_BPB_TotalSectors	DW	?
A_BPB_MediaDescriptor	DB	?
A_BPB_SectorsPerFAT	DW	?
A_BPB_SectorsPerTrack	DW	?
A_BPB_Heads	DW	?
A_BPB_HiddenSectors	DW	?
A_BPB_HiddenSectorsHigh	DW	?
A_BPB_BigTotalSectors	DW	?
A_BPB_BigTotalSectorsHigh	DW	?
A_BPB_Reserved	DB	6 DUP (?)
A_BPB	ENDS

A_BF_BPB	STRUC
A_BF_BPB_BytesPerSector	DW	?
A_BF_BPB_SectorsPerCluster	DB	?
A_BF_BPB_ReservedSectors	DW	?
A_BF_BPB_NumberOfFATs	DB	?
A_BF_BPB_RootEntries	DW	?
A_BF_BPB_TotalSectors	DW	?
A_BF_BPB_MediaDescriptor	DB	?
A_BF_BPB_SectorsPerFAT	DW	?
A_BF_BPB_SectorsPerTrack	DW	?
A_BF_BPB_Heads	DW	?
A_BF_BPB_HiddenSectors	DW	?
A_BF_BPB_HiddenSectorsHigh	DW	?
A_BF_BPB_BigTotalSectors	DW	?
A_BF_BPB_BigTotalSectorsHigh	DW	?
A_BF_BPB_BigSectorsPerFat	DW	?
A_BF_BPB_BigSectorsPerFatHi	DW	?
A_BF_BPB_ExtFlags	DW	?
A_BF_BPB_FS_Version	DW	?
A_BF_BPB_RootDirStrtClus	DW	?
A_BF_BPB_RootDirStrtClusHi	DW	?
A_BF_BPB_FSInfoSec	DW	?
A_BF_BPB_BkUpBootSec	DW	?
A_BF_BPB_Reserved	DW	6 DUP (?)
A_BF_BPB	ENDS

EXT_BPB_INFO	STRUC
EBPB_BYTESPERSECTOR	DW	?
EBPB_SECTORSPERCLUSTER	DB	?
EBPB_RESERVEDSECTORS	DW	?
EBPB_NUMBEROFFATS	DB	?
EBPB_ROOTENTRIES	DW	?
EBPB_TOTALSECTORS	DW	?
EBPB_MEDIADESCRIPTOR	DB	?
EBPB_SECTORSPERFAT	DW	?
EBPB_SECTORSPERTRACK	DW	?
EBPB_HEADS	DW	?
EBPB_HIDDENSECTOR	DD	?
EBPB_BIGTOTALSECTORS	DD	?
EXT_BPB_INFO	ENDS

EXT_BIGBPB_INFO	STRUC
EBGBPB_BYTESPERSECTOR	DW	?
EBGBPB_SECTORSPERCLUSTER	DB	?
EBGBPB_RESERVEDSECTORS	DW	?
EBGBPB_NUMBEROFFATS	DB	?
EBGBPB_ROOTENTRIES	DW	?
EBGBPB_TOTALSECTORS	DW	?
EBGBPB_MEDIADESCRIPTOR	DB	?
EBGBPB_SECTORSPERFAT	DW	?
EBGBPB_SECTORSPERTRACK	DW	?
EBGBPB_HEADS	DW	?
EBGBPB_HIDDENSECTOR	DD	?
EBGBPB_BIGTOTALSECTORS	DD	?
EBGBPB_BIGSECTORSPERFAT	DD	?
EBGBPB_EXTFLAGS	DW	?
EBGBPB_FS_VERSION	DW	?
EBGBPB_ROOTDIRSTRTCLUS	DD	?
EBGBPB_FSINFOSEC	DW	?
EBGBPB_BKUPBOOTSEC	DW	?
EBGBPB_RESERVED	DD	3 DUP (?)
EXT_BIGBPB_INFO	ENDS
.errnz  EXT_BPB_INFO.EBPB_BYTESPERSECTOR            NE  BPB.BPB_BytesPerSector
.errnz  EXT_BPB_INFO.EBPB_SECTORSPERCLUSTER         NE  BPB.BPB_SectorsPerCluster
.errnz  EXT_BPB_INFO.EBPB_RESERVEDSECTORS           NE  BPB.BPB_ReservedSectors
.errnz  EXT_BPB_INFO.EBPB_NUMBEROFFATS              NE  BPB.BPB_NumberOfFATs
.errnz  EXT_BPB_INFO.EBPB_ROOTENTRIES               NE  BPB.BPB_RootEntries
.errnz  EXT_BPB_INFO.EBPB_TOTALSECTORS              NE  BPB.BPB_TotalSectors
.errnz  EXT_BPB_INFO.EBPB_MEDIADESCRIPTOR           NE  BPB.BPB_MediaDescriptor
.errnz  EXT_BPB_INFO.EBPB_SECTORSPERFAT             NE  BPB.BPB_SectorsPerFAT
.errnz  EXT_BPB_INFO.EBPB_SECTORSPERTRACK           NE  BPB.BPB_SectorsPerTrack
.errnz  EXT_BPB_INFO.EBPB_HEADS                     NE  BPB.BPB_Heads
.errnz  EXT_BPB_INFO.EBPB_HIDDENSECTOR              NE  BPB.BPB_HiddenSectors
.errnz  EXT_BPB_INFO.EBPB_BIGTOTALSECTORS           NE  BPB.BPB_BigTotalSectors
.errnz  (SIZE EXT_BPB_INFO) NE  (SIZE BPB)

.errnz  EXT_BIGBPB_INFO.EBGBPB_BYTESPERSECTOR       NE  EXT_BPB_INFO.EBPB_BYTESPERSECTOR
.errnz  EXT_BIGBPB_INFO.EBGBPB_SECTORSPERCLUSTER    NE  EXT_BPB_INFO.EBPB_SECTORSPERCLUSTER
.errnz  EXT_BIGBPB_INFO.EBGBPB_RESERVEDSECTORS      NE  EXT_BPB_INFO.EBPB_RESERVEDSECTORS
.errnz  EXT_BIGBPB_INFO.EBGBPB_NUMBEROFFATS         NE  EXT_BPB_INFO.EBPB_NUMBEROFFATS
.errnz  EXT_BIGBPB_INFO.EBGBPB_ROOTENTRIES          NE  EXT_BPB_INFO.EBPB_ROOTENTRIES
.errnz  EXT_BIGBPB_INFO.EBGBPB_TOTALSECTORS         NE  EXT_BPB_INFO.EBPB_TOTALSECTORS
.errnz  EXT_BIGBPB_INFO.EBGBPB_MEDIADESCRIPTOR      NE  EXT_BPB_INFO.EBPB_MEDIADESCRIPTOR
.errnz  EXT_BIGBPB_INFO.EBGBPB_SECTORSPERFAT        NE  EXT_BPB_INFO.EBPB_SECTORSPERFAT
.errnz  EXT_BIGBPB_INFO.EBGBPB_SECTORSPERTRACK      NE  EXT_BPB_INFO.EBPB_SECTORSPERTRACK
.errnz  EXT_BIGBPB_INFO.EBGBPB_HEADS                NE  EXT_BPB_INFO.EBPB_HEADS
.errnz  EXT_BIGBPB_INFO.EBGBPB_HIDDENSECTOR         NE  EXT_BPB_INFO.EBPB_HIDDENSECTOR
.errnz  EXT_BIGBPB_INFO.EBGBPB_BIGTOTALSECTORS      NE  EXT_BPB_INFO.EBPB_BIGTOTALSECTORS



EXT_IBMBOOT_HEADER	STRUC
EXT_BOOT_JUMP	DB	3 DUP (?)
EXT_BOOT_OEM	DB	8 DUP (?)
EXT_BOOT_BPB	DB	SIZE EXT_BPB_INFO DUP (?)
EXT_PHYDRV	DB	?
EXT_CURHD	DB	?
EXT_BOOT_SIG	DB	?
EXT_BOOT_SERIAL	DD	?
EXT_BOOT_VOL_LABEL	DB	11 DUP (?)
EXT_SYSTEM_ID	DB	8 DUP (?)
EXT_IBMBOOT_HEADER	ENDS

EXT_BIGIBMBOOT_HEADER	STRUC
EXT_BGBOOT_JUMP	DB	3 DUP (?)
EXT_BGBOOT_OEM	DB	8 DUP (?)
EXT_BGBOOT_BPB	DB	SIZE EXT_BIGBPB_INFO DUP (?)
EXT_BGPHYDRV	DB	?
EXT_BGCURHD	DB	?
EXT_BGBOOT_SIG	DB	?
EXT_BGBOOT_SERIAL	DD	?
EXT_BGBOOT_VOL_LABEL	DB	11 DUP (?)
EXT_BGSYSTEM_ID	DB	8 DUP (?)
EXT_BIGIBMBOOT_HEADER	ENDS
.errnz  EXT_BIGIBMBOOT_HEADER.EXT_BGBOOT_JUMP   NE  EXT_IBMBOOT_HEADER.EXT_BOOT_JUMP
.errnz  EXT_BIGIBMBOOT_HEADER.EXT_BGBOOT_OEM    NE  EXT_IBMBOOT_HEADER.EXT_BOOT_OEM
.errnz  EXT_BIGIBMBOOT_HEADER.EXT_BGBOOT_BPB    NE  EXT_IBMBOOT_HEADER.EXT_BOOT_BPB

