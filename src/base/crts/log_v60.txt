***************************************************************************
***************************************************************************
***                                                                     ***
***   This file contains the change history for the MSVC++ v6.0 C/C++   ***
***   Run-Time Libraries (that is, modifications since since 5.0).      ***
***   The file should always be edited at the top so that the most      ***
***   recent changes are at the beginning of the file (immediately      ***
***   after this comment) and the oldest changes are at the end.        ***
***                                                                     ***
***************************************************************************
***************************************************************************

-----------------------------------------------------------------

Thu 04-Feb-99   (GregF)

crtw32\startup\crt0dat.c
crtw32\dllstuff\crtdll.c
    Changed terminator execution loop slightly so that atexit() routines may
    register additional atexit routines.  This fixes VisualStudio7 6787

crtw32\convert\wcstol.c
    Added a range check on each wide char before calling __ascii_isw*() with 
    it.  This fixes NTBug 287463.

-----------------------------------------------------------------

Fri 18-Dec-98   (GregF)

crtw32\startup\tidtable.c
    Forgot to delete the code to unlink the thread locale info struct from the
    list (these structs are no longer kept in a list).

-----------------------------------------------------------------

Mon 14-Dec-98   (GregF)

crtw32\misc\initmon.c, initnum.c, setlocal.c
crtw32\start\tidtable.c
    Fixed a number of bugs beginning with a performance bug (Monte Carlo 
    #11418) which concealed the others.  The performance bug was the per-thread
    pointer to the locale information struct was not being updated.

-----------------------------------------------------------------

Fri 04-Dec-98   (JamesMa)

crtw32\eh\comerr.cpp, crtw32\h\comerr.h, libw32\include\comerr.h
    Removed.
crtw32\h\mtdll.h, crtw32\startup\tidtable.c
    Removed all references to _pceh as part of comerr removal.
makefile, makefile.inc, crtw32\eh\lsources, srcrel\pd-b, srcrel\objects.mkf,
crtw32\tools\win32\relinc.cmd
    Removed all references to comerr.cpp & comerr.h.
srcrel\bldnt.cmd, srcrel\bldwin95.bat
    Replaced references to VC6.0 with VC6.1 (MC bugs 8019, 8020) and pulled
    references to Mac builds from the usage messages.

-----------------------------------------------------------------

Wed 02-Dec-98   (KFrei)

crtw32\rtc\memory.cpp
    Fixed MC 11240 - I was trying to allocating memory, 
    even if allocation wasn't enabled

-----------------------------------------------------------------

Wed 02-Dec-98   (GregF)

crtw32\heap\expand.c
    Removed extra _munlock.  This fixes Monte Carlo #11187

-----------------------------------------------------------------

Tue 01-Dec-98   (KFrei)

crtw32\misc\dbgheap.c, crtw32\rtc\shadow.cpp
    Fixed RTC bug involving dbg versions of realloc & expand (another)
    Monte Carlo #11029

crtw32\rtc\memory.cpp
    Added some DebugString output when the RTC stuff is built for debugging
    I also fixed Greg's date from 01-Nov-98 to 01-Dec-98

-----------------------------------------------------------------

Tue 01-Dec-98   (GregF)

crtw32\misc\onexit.c
    Grow the atexit/_onexit more quickly. This fixes Monte Carlo #9897.

-----------------------------------------------------------------

Mon 30-Nov-98   (KFrei)

crtw32\misc\dbgheap.c
    Fixed RTC bug involving dbg versions of realloc & expand

-----------------------------------------------------------------

Tue 25-Nov-98   (KFrei)

crtw32\rtc\init.cpp, crtw32\rtc\userapi.cpp
    Fixed bug MC 10777 - Delay loaded DLLs & -RTCm crash

-----------------------------------------------------------------

Tue 24-Nov-98   (KFrei)

crtw32\h\rtcapi.h, crtw32\h\rtcsup.h, crtw32\misc\i386\chkesp.c
crtw32\rtc\init.cpp, libw32\include\rtcapi.h
    Added a new RTC callback, to be used by memory functions for -RTCm checks
    rtcapi also got new callbacks for more extensive memory checking

crtw32\h\rtcpriv.h, crtw32\rtc\shadow.cpp
    Fixed MC #10665 - problem with page tables and shadow memory
    Added parameter and reg0 (return value) pointer checking API

-----------------------------------------------------------------

Tue 24-Nov-98   (GregF)

crtw32\h\setlocal.h
crtw32\misc\setlocal.c
    Changed to handle longer specifications for the codepage, and to handle
    too long specifications without crashing. This fixes Monte Carlo 8162

crtw32\stdio\ungetwc.c
    Changed to NOT push characters back onto a string. This fixes Monte Carlo
    8052.

-----------------------------------------------------------------

Tue 24-Nov-98   (KFrei)

crtw32\rtc\shadow.cpp

    Removed a reference to InterlockedCompareExchange, which isn't available
    on Win95.

-----------------------------------------------------------------

Mon 23-Nov-98   (GregF)

crtw32\h\winheap.h
crtw32\heap\calloc.c, expand.c, free.c, heapchk.c, heapinit.c, heapmin.c,
    malloc.c, msize.c, realloc.c, sbheap.c
crtw32\misc\dbgheap.c

    Package of changes which resurrect the VC++ 5.0 small-block heap and
    implement a selection method to choose between the VC++ 6.0 small-block
    heap, the VC++ 5.0 small-block heap and no small-block heap at all.

-----------------------------------------------------------------

Thu 19-Nov-98   (JamesMa)

makefile.inc, srcrel\pd-b
    Added heap\new2.cpp, stdcpp\delaop.cpp, stdcpp\newaop.cpp, stdcpp\newaop2.cpp,
    stdcpp\delaop_s.cpp, stdcpp\newaop_s.cpp & stdcpp\newaop2_s.cpp
crtw32\heap\heap.mkf, crtw32\heap\lsources
    Added new2.obj
crtw32\heap\new.cpp
    Split off new[] to new2.cpp for better granularity.
crtw32\misc\dbgheap.c
    _crtDbgFlag now has _CRTDBG_CHECK_ALWAYS_DF set by default; also removed 2 tests
    prone to false positives and silenced error reporting from within CheckBytes().
crtw32\stdcpp\*, crtw32\stdhpp\*
    Updated all files to Plauger's drop of 11/13.
libw32\include
    Updated all STL headers to Plauger's drop of 11/13.

-----------------------------------------------------------------

Thu 29-Oct-98   (JamesMa)

crtw32\helper\i386\lldvrm.asm, crtw32\helper\i386\ulldvrm.asm
    New compiler helper files, courtesy of Simon Koeman.
crtw32\makefile, crtw32\makefile.inc
crtw32\srcrel\external.mkf, crtw32\srcrel\objects.mkf, crtw32\srcrel\pd-b
crtw32\helper\lsources, crtw32\helper\sources.nt
    Added lldvrm & ulldvrm to build process.

-----------------------------------------------------------------

Tue 27-Oct-98   (JamesMa)

crtw32\stdcpp\ios.cpp, crtw32\stdhpp\iosfwd, libw32\include\iosfwd
    Definition of BADOFF moved from ios.cpp to iosfwd for compatibility with 6.0 (MC bug #7642)

-----------------------------------------------------------------

Thu 22-Oct-98   (JamesMa)

makefile.sub
    Now uses batch-mode compilation.

-----------------------------------------------------------------

Tue 13-Oct-98   (gregf)

crtw32\heap\sbheap.c
    Added a check to __sbh_free_block for an already freed block. In case such
    a block is found, simply return with no other action.

crtw32\mbstring\ismbalph.c
    Minor typo, MT should have been _MT.

-----------------------------------------------------------------

Thu 08-Oct-98   (gregf)

crtw32\dllstuff\crtlib.c

crtw32\h\stdlib.h, winheap.h

crtw32\heap\calloc.c, expand.c, free.c, heapchk.c, heapinit.c, heapmin.c,
        malloc.c, msize.c. realloc.c, sbheap.c

crtw32\misc\getqloc.c

crtw32\startup\crt0.c, crt0dat.c, dllcrt0.c

libw32\msvcrt.src

libw32\include\stdlib.h

    Package of changes intended to suppress the small-block heap, by default,
    on NT 5.0. As part of this, use of GetVersion was replaced by GetVersionEx
    and a global variable, _osplatform, was introduced to distinguish between 
    NT and Win9x.

-----------------------------------------------------------------

Mon 28-Sep-98   (gregf)

crtw32\time\localtim.c, loctim64.c
    Fixed very minor error in determinin of DST status at the ends of the 
    Epoch. This was Monte Carlo 2842.

crtw32\time\tzset.c
    Fixed error in calculation of DST transition date (when the transition day
    is the first day of the month). This was Monte Carlo #1059

-----------------------------------------------------------------

Thu 24-Sep-98   (gregf)

crtw32\lowio\eof.c
    Use _lseeki64_lk instead of _lseek_lk so that _eof works with very large
    files. This was Monte Carlo bug 3834.

crtw32\misc\wperror.c
    Fixed handling of NULL, or empty, message string argument. This was Monte
    Carlo bug 2757.

-----------------------------------------------------------------

Tue 22-Sep-98   (gregf)

crtw32\stdio\input.c, output.c
    Added support for %I and %I32 size modifiers. %I is equivalent to %I32 in
    Crts for Win32 (and equivalent to %I64 in Crts for Win64).

-----------------------------------------------------------------

Sun 20-Sept-98   (JamesMa)

crtw32\stdhpp\xlocale, xlocnum
libw32\include\xlocale, xlocnum
        Restored explicit casts.

-----------------------------------------------------------------

Sat 12-Sept-98   (JamesMa)

srcrel\external.mkf
        Fixed translation of sampl[d|e]_.def (MC bug #5419).
crtw32\stdcpp\dlldef.obj
        Re-enabled warning 4667 (MC bug #3995, fixed in Plauger's 1st 6.1 drop).

-----------------------------------------------------------------

Fri 11-Sept-98   (JamesMa)

makefile, makefile.inc

crtw32\h\fpieee.h

crtw32\stdcpp\_tolower.c, _toupper.c, delop.cpp, delop_s.cpp, dlldef.cpp, fiopen.cpp,
        iomanip.cpp, ios.cpp, iostream.cpp, limits.cpp [NEW], locale.cpp, locale0.cpp, newop.cpp,
        newop_s.cpp, newop2.cpp, newop2_s.cpp, nomemory.cpp, stdthrow.cpp [NEW], string.cpp,
        strstrea.cpp, uncaught.cpp, wctrans.c, wctype.c,wiostrea.cpp, wlocale.cpp, xcosh.c,
        xdnorm.c, xdscale.c, xdtest.c, xexp.c, xfcosh.c,xfdnorm.c, xfdscale.c, xfdtest.c,
        xfexp.c, xfsinh.c, xfvalues.c, xlcosh.c, xldnorm.c,xldscale.c, xldtest.c, xlexp.c,
        xlocale.cpp, xlock.cpp, xlpoly.c, xlsinh.c, xlvalues.c,xmath.h, xmbtowc.c, xpoly.c,
        xsinh.c, xstod.c, xstrcoll.c, xstrxfrm.c, xvalues.c,xwcscoll.c, xwcsxfrm.c, xwctomb.c

crtw32\stdhpp\algorithm, bitset, cassert, cctype, cerrno, cfloat, ciso646, climits,
        clocale, cmath, complex, csetjmp, csignal, cstdarg, cstddef, cstdio, cstdlib, cstring,
        ctime, cwchar, cwctype, deque, exception, fstream, functional, iomanip, ios, iosfwd,
        iostream, iso646.h, istream, iterator, limits, list, locale, map, memory, new, numeric,
        ostream, queue, set, sstream, stack, stdexcept, stl.h, streambuf, string, strstream,
        typeinfo, use_ansi.h, utility, valarray, vector, wctype.h, xcomplex, xiosbase, xlocale,
        xlocinfo, xlocinfo.h, xlocmon, xlocmes [NEW], xlocnum, xloctime, xmemory, xstddef,
        xstring, xtree, xutility, ymath.h, yvals.h

fpw32\tran\lsources

fpw32\tran\i386\filter.c, filter_simd.c [NEW], xmmi_fp_emul.c [NEW], filter.h [NEW],
        temp_context.h [NEW], xmmi_types.h [NEW]

libw32\msvcp61.rc [NEW]

libw32\include\algorithm, bitset, cassert, cctype, cerrno, cfloat, ciso646, climits, clocale, cmath,
        complex, csetjmp, csignal, cstdarg, cstddef, cstdio, cstdlib, cstring, ctime, cwchar,
        cwctype, deque, exception, fpieee.h, fstream, functional, iomanip, ios, iosfwd, iostream,
        iso646.h, istream, iterator, limits, list, locale, map, memory, new, numeric, ostream,
        queue, set, sstream, stack, stdexcept, stl.h, streambuf, string, strstream, typeinfo,
        use_ansi.h, utility, valarray, vector, wctype.h, xcomplex, xiosbase, xlocale, xlocinfo,
        xlocinfo.h, xlocmon, xlocmes [NEW], xlocnum, xloctime, xmemory, xstddef, xstring, xtree,
        xutility, ymath.h, yvals.h

srcrel\external.mkf, mkclnmkf.c, objects.mkf, pd-b

-----------------------------------------------------------------

Fri 11-Sep-98   (GregF)

crtw32\misc\a_cmp.c, a_loc.c, a_map.c, a_str.c, w_cmp.c, w_loc.c, w_map.c,
        w_str.c
    Revised method of temporary allocations so that _malloc_crt is used if the
    attempt to use _alloca fails.

crtw32\misc\aw_com.c, mbtowenv.c, putenv.c, w_env.c, wtombenv.c
    Fixed cases where CP_ACP should have been used, but wasn't

crtw32\startup\i386\chkstk.asm
    Fixed handling of small frames

makefile.inc
crtw32\convert\_ctype.c, _mbslen.c, atox.c, isctype.c, iswctype.c, mblen.c,
        mbstowcs.c, mbtowc.c, strtol.c, tolower.c, toupper.c, towlower.c,
        towupper.c, wcstol.c, wcstombs.c, wctomb.c, xtow.c
crtw32\h\ctype.h, mtdll.h, setlocal.h, stdlib.h, string.h
crtw32\misc\initctyp.c, initmon.c, initnum.c, inittime.c, setlocal.c
crtw32\startup\tidtable.c
crtw32\string\lsources, memicmp.c, strcoll.c, stricmp.c, stricoll.c, strlwr.c,
        strncoll.c, strnicmp.c, strnicol.c, strupr.c, strxfrm.c, wcscoll.c,
        wcsicmp.c, wcsicoll.c, wcslwr.c, wcsncoll.c, wcsnicmp.c, wcsnicol.c,
        wcsupr.c, wcsxfrm.c
crtw32\string\i386\_memicmp.asm (renamed from memicmp.asm), _stricmp.asm
        (renamed from stricmp.asm), _strnicm.asm(renamed from strnicmp.asm)
crtw32\time\strftime.c, tzset.c, wcsftime.c
    Converted handling of locale data in multithread apps from a scheme of
    serializing access with our 'locks' to a scheme somewhat akin to per-thread
    data. More specifically, each thread has its own pointer to a copy of the
    locale info.

-----------------------------------------------------------------

Thu 30-July-98   (JamesMa)

crtw32\rtc\userapi.cpp
    Bug fix from KFrei: errnum is now type _RTC_ErrorNumber throughout.

-----------------------------------------------------------------

Tue 28-July-98   (JamesMa)

crtw32\rtc\bintree.cpp, callsite.cpp, chsyheap.cpp, contain.cpp, convert.cpp,
        error.cpp, fileio.cpp, init.cpp, memory.cpp, pdblkup.cpp, shadow.cpp,
        stack.cpp, userapi.cpp, lsources
    New directory & files - KFrei's RTC support.
crtw32\heap\calloc.c, delete.cpp, expand.c, free.c, malloc.c, new.cpp, realloc.cpp
misc\dbgdel.cpp, dbgheap.c, dbgnew.cpp, i386\chkesp.c
    RTC update.
crtw32\h\rtcsup.h, rtcapi.h, rtcpriv.h
    RTC headers (last 2 new).
crtw32\eh\comerr.cpp, lsources
    COM+ EH support routines from JonCaves (1st file new)
crtw32\startup\tidtable.c
    Per-thread COM+ EH variable initialization
crtw32\h\comerr.h, mtdll.h
    COM+ EH headers (1st file new)
crtw32\bsku\bsku.cpp, lsources
    New directory & files - support for 'Book SKU' version of CRTs.
libw32\include\rtcapi.h, comerr.h
    Release versions of new headers.
makefile, makefile.inc
srcrel\pd-b, objects.mkf, external.mkf, makefile
    Build support for RTC, COM+ EH & Book SKU.

-----------------------------------------------------------------

Tue 07-July-98   (JamesMa)

libw32\msvcrt.rc, msvcirt.rc, msvcp60.rc
    Version strings revved to 6.10 (Monte Carlo bug #3289).

-----------------------------------------------------------------

Mon 15-June-98   (GregF)

crtw32\time\gmtime64.c
    Fixed elapsed years calculation.

-----------------------------------------------------------------

Fri 12-June-98   (GregF)

crtw32\time\ftime64.c, gmtime64.c
    Fixed compiler warnings about assignments of __int64 values to ints or
    longs.

-----------------------------------------------------------------

Thu 11-June-98   (GregF)

crtw32\dos\stat64.h
crtw32\h\tchar.h, time.h
crtw32\lowio\fstat64.c
makefile.inc
    Fixes to the 6/8 checkin, plus one file (makefile.inc) that I forgot to
    check in.

-----------------------------------------------------------------

Mon 08-June-98   (GregF)

crtw32\direct\findf64.c, lsources, wfndf64.c
crtw32\dos\lsources, stat64.c, wstat64.c
crtw32\h\ctime.h, internal.h, io.h, tchar.h, time.h, wchar.h
crtw32\h\sys\stat.h, timeb.h, types.h, utime.h
crtw32\lowio\fstat64.c, lsources
crtw32\time\ctime64.c, dtoxtm64.c, ftime64.c, gmtime64.c, loctim64.c, lsources,
    mktime64.c, time64.c, tzset.c, utime64.c, wctime64.c
doc\copycrt.bat
srcrel\pd-b
    Implementation of support for a 64-bit time_t-like type. The new type is
    called __time64_t. For each old time_t-dependent type or function, there
    is a type or function using __time64_t in place of time_t.

crtw32\time\time.c
    Get UTC time directly from the system. Previously, UTC was computed from
    local time (for compatibility with Win32S).

-----------------------------------------------------------------

Tue 09-June-98   (JamesMa)

fpw32\conv\intrncvt.c
    Fixed long-standing off-by-1 error in _RoundMan().
crtw32\h\crtdbg.h
    Minor cleanups.
libw32\include\iso646.h, wctype.h, ymath.h, yvals.h, new
    Files were out-of-ssync with crtw32\h, primarily RTC and #pragma once changes.
libw32\include\crtdbg.h
    Updated copyright.

-----------------------------------------------------------------

Thu 28-May-98   (GregF)

crtw32\misc\a_cmp.c, a_map.c, w_cmp.c, w_map.c
    Fixed internal, string-length utilities, strncnt and wcsncnt. This
    fixes RAID VS98 45402.

-----------------------------------------------------------------

Wed 27-May-98   (GregF)

srcrel\pd-b
doc\copysrc.bat
    Build changes for ntcsup.h

-----------------------------------------------------------------

Tue 26-May-98   (GregF)

crtw32\h\ntcsup.h
    Added header needed by the immediately preceeding checkin.

-----------------------------------------------------------------

Fri 22-May-98   (JamesMa)

crtw32\heap\malloc.c, crtw32\heap\calloc.c, crtw32\heap\realloc.c, crtw32\heap\free.c,
        crtw32\heap\new.cpp, crtw32\heap\delete.cpp, crtw32\misc\dbgheap.c,
        crtw32\misc\dbgnew.cpp, crtw32\misc\dbgdel.cpp, crtw32\misc\i386\chkesp.c,
        crtw32\stdcpp\newop.cpp, crtw32\stdcpp\newop2.cpp, crtw32\stdcpp\delop.cpp,
        crtw32\stdhpp\new, crtw32\h\crtdbg.h, libw32\include\crtdbg.h, libw32\msvcrt.src
    Support for KFrei's RTC work, and operators new[] and delete[].
fpw32\tran\i386\filter.c
    Fix for VS98 bug 40117.

-----------------------------------------------------------------

Fri 01-May-98   (GregF)

crtw32\h\mbctype.h, mbdata.h, mbstring.h, mtdll.h
crtw32\mbstring\ismbalnm.c, ismbalph.c, ismbdgt.c, ismbgrph.c, ismblgl.c,
                ismblwr.c, ismbprn.c, ismbpunc.c, ismbsle.c, ismbspc.c,
                ismbstr.c, ismbupr.c, mbbtype.c, mbccpy.c, mbclen.c,
                mbclevel.c, mbctype.c, mbsbtype.c, mbschr.c, mbscmp.c,
                mbscoll.c, mbscspn.c, mbsdec.c, mbsicmp.c, mbsicoll.c,
                mbsinc.c, mbslen.c, mbslwr.c, mbsnbcat.c, mbsnbcmp.c,
                mbsnbcnt.c, mbsnbcol.c, mbsnbcpy.c, mbsnbicm.c, mbsnbico.c,
                mbsncat.c, mbsnccnt.c, mbsncmp.c, mbsncoll.c, mbsncpy.c,
                mbsnextc.c, mbsnicmp.c, mbsnicol.c, mbsnset.c, mbsrchr.c,
                mbsrev.c, mbsspn.c, mbsstr.c, mbstok.c, mbsupr.c,
                mbtolwr.c, mbtoupr.c, tojisjms.c
crtw32\misc\splitpat.c
crtw32\startup\tidtable.c
libw32\include\mbctype.h, mbstring
    Package of changes converting the multithread flavor of the mbc support
    over to using per-thread copies of the mbc info rather directly 
    referencing the global vars and arrays. The idea is that each thread has
    a private reference to a struct containing all the mbc info, and the logic
    to update that reference at the start of each function using it. While 
    many threads may be using the same struct (indeed, ideally they all are),
    each thread's reference is a per-thread datum. The structs themselves are 
    created, as needed, destroyed when no longer used by any thread, but never
    modified (except for a reference count field).

-----------------------------------------------------------------

Wed 29-Apr-98   (GregF)

srcrel\makefile
    Changed references to crt60 to crt60a.

-----------------------------------------------------------------

Fri 03-Apr-98   (JamesMa)

crtw32\startup\tlssup.c
    _tls_start & _tls_end are no longer initialized (VS98 bug #34711).

-----------------------------------------------------------------

Thu 26-Mar-98   (Gregf)

crtw32\dos\drive.c, getcwd.c
crtw32\heap\calloc.c, expand.c, free.c, heapchk.c, heapmin.c, malloc.c,
    msize.c, realloc.c
crtw32\lowio\chsize.c, close.c, commit.c, dup.c, dup2.c, eof.c, flength.c,
    fleni64.c, fstat.c, locking.c, lseek.c, lseeki64.c, open.c, pipe.c,
    read.c, setmode.c, write.c
crtw32\misc\dbgheap.c, getenv.c, onexit.c, perror.c, putenv.c, winsig.c,
    wperror.c
crtw32\stdio\clearerr.c, closeall.c, fclose.c, fdopen.c, fflush.c, fgetc.c,
    fgets.c, fgetwc.c, fopen.c, fprintf.c, fputc.c, fputs.c, fputwc.c,
    fputws.c, fread.c, freopen.c, fscanf.c, fseek.c, fseeki64.c, ftell.c,
    ftelli64.c, fwprintf.c, fwrite.c, fwscanf.c, gets.c, getw.c, popen.c,
    printf.c, puts.c, putw.c, rewind.c, rmtmp.c, scanf.c, setmaxf.c, setvbuf.c,
    stream.c, tempnam.c, tmpfile.c, ungetc.c, ungetwc.c, vfprintf.c,
    vfwprint.c, vprintf.c, vwprintf.c, wprintf.c, wscanf.c

    Exception-safe locking.

-----------------------------------------------------------------
Tues 10-Mar-98	(v-jfujii)

fpw32\tran\alpha\dpml_exc.c
	fix for bug#146614, invalid exception handling broken, found by the NT group

makefile
	removed "-filealign:8192" to Alpha linker flags

-----------------------------------------------------------------
Mon 9-Mar-98	(v-jfujii)

makefile
	added "-filealign:8192" to Alpha linker flags

-----------------------------------------------------------------

Tue 17-Feb-98   (JamesMa)

makefile
    Added "-filealign:4096" to x86 linker flags, per DanS's suggestion.
libw32\msvcrt.rc, msvcirt.rc, msvcp60.rc
    Now include verstamp.h instead of version.h and use 'rbld' as final
    field of FILEVERSION & PRODUCTVERSION.

-----------------------------------------------------------------
Thu 5-Feb-98	(v-jfujii)

crtw32\h\math.h
libw32\include\math.h
    add ALPHA declaration for ceil and floor

-----------------------------------------------------------------

Fri 30-Jan-98   (Gregf)

crtw32\convert\iswctype.c
    Allow meaningful processing of wide characters in the C locale. This is
    vaguely against the letter of ISO (which says locale does affect the isw*
    functions), but consistent with our own doc and far more useful than 
    treating every wide char > 255 as an error. Fixes NT bug 129235.

crtw32\time\tzset.c
    If no locale has been set for LC_ALL or LC_CTYPE, use the default ANSI 
    codepage when trying to convert the time zone name strings from UNICODE to
    multibyte. This fixes NT bug 100144.

-----------------------------------------------------------------

Thu 22-Jan-98   (JamesMa)

crtw32\stdhpp\deque, libw32\include\deque
    Fix for VS98 bug #26947.
crtw32\stdhpp\<all except cassert>, libw32\include\<all Std. C++ headers except cassert>
    Added "#pragma once" (VS98 bug #26683).

-----------------------------------------------------------------

Tue 20-Jan-98   (Gregf)

crtw32\h\setlocal.h
crtw32\misc\nlsdata2.c, setlocal.c
crtw32\string\strcoll.c, stricoll.c, strncoll.c, strnicol.c, strxfrm.c,
        wcscoll.c, wcsicoll.c, wcsncoll.c, wcsnicol.c, wcsxfrm.c
crtw32\stdcpp\xstrcoll.c, xstrxfrm.c, xwcscoll.c, xwcsxfrm.c
    Added new internal global, __lc_collate_cp, to keep track of and use the
    proper codepage for LC_COLLATE stuff. This fixes VC98 bug #25645.

crtw32\time\ftime.c
    Completely rewritten to fix the determination of DST status. This fixes
    VC98 bug #25763.

-----------------------------------------------------------------

Mon 19-Jan-98   (JamesMa)

crtw32\h\crtdbg.h, libw32\include\crtdbg.h
    At request of DeanM, made debug prototypes of new() & delete()
    #ifndef _MFC_OVERRIDES_NEW.

-----------------------------------------------------------------

Fri 09-Jan-98   (JamesMa)

makefile.sub
    Line number info is now removed from BBT-enabled dll .objs for which no
    source is shipped (VS98 bug #10687).
libw32\tools\i386\whackline.exe
    New file; removes line number info from .objs, courtesy of DanS/KHerold.
crtw32\tools\win32\newline.sed, crtw32\tools\win32\delblank.sed
    New files; needed for 'whackline' processing.
srcrel\pd-b
    Added libw32\tools\i386\whackline.exe, crtw32\tools\win32\newline.sed and
    crtw32\tools\win32\delblank.sed
makefile
    .pdbs for BBT-enabled dlls are now created in bbt\dll_pdb subdirectory.

-----------------------------------------------------------------

Fri 19-Dec-97   (JamesMa)

crtw32\stdhpp\xlocnum, libw32\include\xlocnum
    Fixed buffer-overflow problem (VS98 #4706) by enlarging internal buffers.

-----------------------------------------------------------------

Mon 15-Dec-97   (Gregf)

crtw32\misc\initctyp.c
    When no codepage is defined, use LOCALE_IDEFAULTANSICODEPAGE, rather than
    LOCALE_IDEFAULTCODEPAGE.

crtw32\stdcpp\xstrcoll.c, xstrxfrm.c, xwcscoll.c, xwcsxfrm.c
crtw32\string\strcoll.c, stricoll.c, strncoll.c, strnicol.c, strxfrm.c,
              wcscoll.c, wcsicoll.c, wcsncoll.c, wcsnicol.c, wcsxfrm.c
    Use __lc_codepage in the locale-dependent string functions.

-----------------------------------------------------------------

Fri 12-Dec-97   (JamesMa)

crtw32\h\eh.h, libw32\include\eh.h, crtw32\h\process.h,
        libw32\include\process.h, crtw32\h\setjmp.h, libw32\include\setjmp.h 
    All __declspec(noreturn)s are now #ifdef _MSC_VER >= 1200 (VS98 #22226).
crtw32\h\stdlib.h, libw32\include\stdlib.h
    Protos for abort, exit & _exit are now __declspec(noreturn) (VS98 #22223).
cleanbld.cmd, srcrel\external.mkf, srcrel\makefile, srcrel\objects.mkf
    Now builds CRTs into a directory specified by CRT_BUILDDIR environment
    variable; default is \msdev, as always.

-----------------------------------------------------------------

Thu 11-Dec-97   (Gregf)

crtw32\stdhpp\functional
    Added const to () definition in mem_fun* (e.g., mem_fun_t) template classes.
    This fixes VS 98 bug #21393.

-----------------------------------------------------------------

Tue 09-Dec-97   (Gregf)

crtw32\heap\sbheap.c
    Release the address space reserved for a region when that region is
    is discarded. This fixes VS98 #21538.

-----------------------------------------------------------------

Mon 08-Dec-1997	(v-jfujii)

makefile
	add -Gy to Alpha specific CC_OPTS and AS_OPTS

fpw32\tran\alpha\pows.s
	change .eflag value from 128 to 4

-----------------------------------------------------------------

Thu 04-Dec-97   (JamesMa)

crtw32\stdhpp\utility, libw32\include\utility
    Added constructor for pair cv-conversion bug (VS98 #16727).
crtw32\stdhpp\queue, libw32\include\queue
    Includes <functional> (VS98 #20113).
crtw32\stdhpp\list, libw32\include\list
    _Next & _Prev are now _Node *, not void * (VS98 #1491).
crtw32\stdhpp\xtree, libw32\include\xtree
    _Next, _Parent & _Right are now _Node *, not void * (VS98 #1491).
    (Kudos to MMalone for observing that these last 2 fixes are now feasible!)

-----------------------------------------------------------------

Tues 25-Nov-97 (v-jfujii)

crtw32\helper\alpha\smove.s, smovem.s - check in the fixes to OtsMove and OtsMoveMinimum to prevent them from prefetching beyond their buffers.
  
-----------------------------------------------------------------

Fri 21-Nov-97   (JamesMa)

crtw32\h\process.h, libw32\include\process.h
    _cexit() & _c_exit() are no longer __declspec(noreturn).
makefile
    .pdbs for the debug dlls are now generated in a dll_pdb subdirectory with
    their 'natural' names.
doc\copycrt.bat
    .pdbs for the debug dlls are now copied from a dll_pdb subdirectory.

-----------------------------------------------------------------

Wed 19-Nov-97   (JamesMa)

crtw32\h\math.h, libw32\include\math.h
    Cleaned up _Pow_int to prevent C4146.
crtw32\stdhpp\new, libw32\include\new
    Removed extern _New_hand (VS98 #18416).
crtw32\stdhpp\xcomplex, libw32\include\xcomplex
    Added redefiniton guard (VS98 #18346).
crtw32\stdhpp\xtree, libw32\include\xtree
    Tidied up redefinition guard (_XTREE_ instead of _TREE_).

-----------------------------------------------------------------

Thu 13-Nov-97   (JamesMa)

crtw32\makefile
    Image base of msvcp60d.dll moved from 10400000 to 10480000 (VS98 #4687). 

-----------------------------------------------------------------

Fri 07-Nov-97   (GregF)

crtw32\mbstring\mbsncoll.c
    Small fix for POSIX build from Roger Lanser (already in ia64 tree).

-----------------------------------------------------------------

Thu 06-Nov-97   (GregF)

crtw32\heap\calloc.c, expand.c, free.c, malloc.c, msize.c, realloc.c
    Small fixes for POSIX build from Roger Lanser.

crtw32\h\wchar.h
libw32\include\wchar.h
    Enclosed macro and inline defs of isleadbyte() in #ifndef 
    _CTYPE_DISABLE_MACROS. Affected NT build.

-----------------------------------------------------------------

Mon 03-Nov-97   (v-jfujii)
crtw32\helper\alpha\sfill.s 
    check in fix for NTBUG#115659, Win16 apps on Alpha - most dialog title 
    bars contain garbage text "yyyyyyy|||||||||".

-----------------------------------------------------------------

Mon 03-Nov-97   (JamesMa)

crtw32\convert\wtox.c
    Fixed buffer-size bug in __int64 version (VS98 #15991).

-----------------------------------------------------------------

Thu 30-Oct-97   (JamesMa)

cleanbld.cmd
    Added 'DELNODE' argument; returns errlev.
makefile
    Debug dll .pdbs now named msvcxxx_dll.pdb.
doc\copycrt.bat
    New msvcxxx_dll.pdbs copied to debug\msvcxxx.pdb.
srcrel\external.mkf
    Striplin.exe now built with default compiler.
srcrel\makefile
    Mkclnmkf.exe now built with default compiler.
crtw32\h\eh.h, libw32\include\eh.h
    terminate() & unexpected() now __declspec(noreturn).
crtw32\h\process.h, libw32\include\process.h
    abort(), exit(), _exit(), _cexit() and _c_exit() now __declspec(noreturn).
crtw32\h\setjmp.h, libw32\include\setjmp.h
    longjmp() now __declspec(noreturn).

-----------------------------------------------------------------

Mon 22-Oct-97   (GregF)

crtw32\stdhpp\list
libw32\include\list
    Added constructor (for list) for a pair of const _Ty * -s. This fixes
    VS98 bug #1478.

-----------------------------------------------------------------

Fri 17-Oct-97   (GregF)

crtw32\stdhpp\vector
libw32\include\vector
    Changed relational operators (==, et al) from member functions to template
    functions. This fixes VS98 #1047.

-----------------------------------------------------------------

Tue 14-Oct-97   (GregF)

crtw32\stdhpp\map
libw32\include\map
    Added assignment operator to map and multimap templates

crtw32\stdhpp\set
crtw32\include\set
    Made the const and non-const iterator types in the set and multiset 
    templates distinct, same for const and non-const reference types. Added
    versions of appropriate methods for non-const iterators. This fixes
    VS98 bug #1458.

crt tests\test\old\slconform\t23a.cpp
    Removed the const from the defs of Ptrty so that it is distinct from 
    Cptrty. This goes with the change to the set header above.

-----------------------------------------------------------------

Fri 10-Oct-97   (v-jfujii)

crtw32\helper\alpha\insv.s - check in a fix that made it into the NT pool 
    but not here.  see raid db VS98 #11884

-----------------------------------------------------------------

Mon 06-Oct-97   (JamesMa)

makefile.inc
    Non-debug version of chkesp.obj now used exclusively (bug #10687).
crtw32\heap\malloc.c
    Minor Posix fix - wrong #endifs corrected.
crtw32\h\assert.h, conio.h, ctype.h, direct.h, dos.h, eh.h, errno.h, excpt.h,
        float.h, fpieee.h, io.h, locale.h, malloc.h, math.h, mbctype.h,
        mbstring.h, memory.h, new.h, process.h, search.h, setjmp.h, signal.h,
        stddef.h, stdio.h, stdlib.h, string.h, time.h, wchar.h,
        crtw32\h\sys\stat.h, timeb.h, utime.h, crtw32\stdhpp\wctype.h,
        libw32\include\assert.h, conio.h, ctype.h, direct.h, dos.h, eh.h, errno.h,
        excpt.h, float.h, fpieee.h, io.h, locale.h, malloc.h, math.h, mbctype.h,
        mbstring.h, memory.h, new.h, process.h, search.h, setjmp.h, signal.h,
        stddef.h, stdio.h, stdlib.h, string.h, time.h, wchar.h, wctype.h,
        libw32\include\sys\stat.h, timeb.h, utime.h
    Restored not-so-obsolete _CRTAPI1 macro.
crtw32\h\mbdata.h, crtw32\h\stdio.h, libw32\include\stdio.h
    Incorporated BryanT's _POSIX #ifdefs.

-----------------------------------------------------------------

Tue 30-Sep-97   (BryanT)

crtw32\heap\calloc.c, expand.c, free.c, heapinit.c, heapmin.c,
    malloc.c, msize.c, realloc.c

crtw32\mbstring\ismbalnm.c, ismbalph.c, ismbdgt.c, ismbgrph.c,
    ismblwr.c, ismbprn.c, ismbpunc.c, ismbspc.c, ismbupr.c, mbctype.c
    mbscoll.c, mbsicmp.c, mbsicoll.c, mbslwr.c, mbsnbcol.c, mbsnbico.c
    mbsncoll.c, mbsnicol.c, mbsupr.c, mbtolwr.c, mbtoupr.c

crtw32\misc\perror.c

crtw32\startup\crt0dat.c, tidtable.c

crtw32\stdio\_file.c, fdopen.c

fpw32\tran\alpha\*.s, *.c

<Lots of DIRS/SOURCES/SOURCES.NT files)

makefile

    Fix POSIX build and resync with the NT sources.

-----------------------------------------------------------------

Tue 30-Sep-97   (GregF)

crt60\makefile
    Changed the base address of the load image of msvcp60d.dll to 0x10400000.
    This fixes (one hopes!) VS98 bug #4687.

-----------------------------------------------------------------

Tue 23-Sep-97   (GregF)

crtw32\convert\xtoa.c
    Put in the one line of code needed to handle negative __int674 values.
    This fixes VS98 bug #9170.

crtw32\heap\sbheap.c
    Conditioned (#if 0) out DumpEntry from the build, but left it in the
    source. It was obviously leftover from when Rich was debugging his new
    heap scheme. This fixes VS98 bug #10075.

-----------------------------------------------------------------

Mon 22-Sep-97   (JamesMa)

crtw32\mbstring\mbbtype.c, crtw32\misc\w_loc.c, crtw32\misc\w_map.c,
        crtw32\misc\w_str.c, crtw32\misc\w_cmp.c, crtw32\misc\w_env.c,
        crtw32\misc\a_loc.c, crtw32\misc\a_map.c, crtw32\misc\a_atr.c,
        crtw32\misc\a_cmp.c, crtw32\misc\aw_com.c
    Trivial return statements added to avoid new C4715 warnings.
crtw32\stdcpp\xmbtowc.c
    Non-trivial return statement added to avoid new C4715 warning.
crtw32\heap\handler.cpp
    "OBSOLETE" warning removed from _set_new_handler() (VS98 bug #9126).
libw32\msvcrt.rc, libw32\msvcirt.rc, libw32\msvcp60.rc
    Revved version & copyright strings (VS98 bug #9826).
crtw32\tools\win32\relinc.cmd
    Now ifstrips crtw32\stdhpp headers.
crtw32\tools\win32\relinc.if
    Now removes "#ifdef __FORCE_INSTANCE" blocks.
libw32\include\complex, fstream, ios, istream, locale, sstream, streambuf,
        string, wctype.h, xcomplex, xlocale, xlocmon, xlocnum, xloctime,
        xstddef, xstring, yvals.h
    Ifstripped to remove "#ifdef CRTDLL2" & "#ifdef __FORCE_INSTANCE"
    blocks and "#ifndef CRTDLL2" statements.
libw32\include\ostream
    Ifstripped as above; fix of 8/7/97 to crtw32\stdhpp version propagated.

-----------------------------------------------------------------

Mon 15-Sep-97   (JamesMa)

crtw32\stdhpp\deque, libw32\include\deque
    Fixed several memory-corruption bugs, including VS98 #879.
crtw32\stdhpp\utility, libw32\include\utility
    Prevented C4700 warnings (VS98 #6932).
crtw32\stdhpp\xstring, libw32\include\xstring
    No longer disables C4700, per fix to VS98 #6932.
crtw32\h\math.h, libw32\include\math.h
    Removed bogus single-line comment (VS98 #7870).

-----------------------------------------------------------------

Fri 12-Sep-97   (JamesMa)

crtw32\h\tchar.h, libw32\include\tchar.h
    Restored mapping of _tcslen to strlen (VS98 #9443).

-----------------------------------------------------------------

Fri 12-Sep-97   (GregF)

crtw32\h\mbdata.h
    Added declaration for __ismbcodepage, and the _ISMBCP and _ISNOTMBCP
    macros.

crtw32\mbstring\ismbalnm.c, ismbalph.c, ismbdgt.c, ismbgrph.c, ismblwr.c,
                ismbprn.c, ismbpunc.c, ismbsle.c, ismbspc.c, ismbstr.c,
                ismbupr.c,mbsbtype.c, mbschr.c, mbscmp.c, mbscspn.c, mbsdec.c,
                mbsicmp.c, mbslen.c, mbsnbcat.c, mbsnbcmp.c, mbsnbcpy.c,
                mbsnbicm.c, mbsnbset.c, mbsncat.c, mbsncmp.c, mbsncpy.c,
                mbsnicmp.c, mbsnset.c, mbsrchr.c, mbsrev.c, mbsset.c, mbsspn.c,
                mbsstr.c, mbstok.c
    Replaced occurence of the expressions (__mbcodepage == 0) and )0 ==
    __mbcodepage) with the macro _ISNOTMBCP. Also, fixed up some indents while
    I was at it. This fixes VS98 bug #8704.

crtw32\mbstring\mbctype.c
    Added __ismbcodepage to keep track of whether or not the current code page
    is really a multibyte code page. Used this restore the old return semantics
    of _getmbcp(). This fixes VS98 bug #9443.

-----------------------------------------------------------------

Mon 08-Sep-97   (GregF)

crtw32\stdhpp\algorithm
libw32\include\algorithm
    Initialize _D1n and _D2n to 0 as per VS98 bug #5754.

crtw32\stdhpp\memory
libw32\include\memory
    Better version of the fix below (i.e., it doesn't break self-assignment).
    This fixes VS98 bug #2678 (trust me).

-----------------------------------------------------------------

Tue 02-Sep-97   (GregF)

crtw32\stdhpp\memory
    Revised auto_ptr's assignment overload so as to transfer ownership status
    from the rhs to the lhs, and ensure the rhs no longer owns the allocation.
    This fixes VS98 bug #2678.

-----------------------------------------------------------------
Fri 29-Aug-1997 (v-jfujii)

fpw32\tran\alpha\frexp.s
    add alpha specific implementation of frexp()

fpw32\tran\alpha\ldexp.s
    add alpha specific implementation of ldex()

fpw32\tran\alpha\dpml_exc.c
    fix vs98 #4102 and #1474

fpw32\tran\alpha\ieee.c
    fix vs98 #4103

fpw32\tran\alpha\pows.s
    fix long standing bug, pow(0,-1) should return +INF instead of -INF

fpw32\tran\lsources
    add -Gy to alpha specific CFLAGS and AFLAGS

-----------------------------------------------------------------

Fri 29-Aug-97   (GregF)

crtw32\lowio\osfinfo.c
    Changed _open_osfhandle to propagate the _O_NOINERIT flag to the lowio
    flags. This fixes VS98 bug #7762.

-----------------------------------------------------------------

Thu 28-Aug-97   (GregF)

crtw32\time\tzset.c
    Fixed the underflow adjustment in cvtdate(). This fixed VS98 bug #881.
    Also, removed some obsolete Win32S support and detab-ed.

-----------------------------------------------------------------

Wed 27-Aug-97   (GregF)

crtw32\time\clock.c
    Use the GetSystemTimeAsFileTime API. Also, detab-ed. This fixes VS98
    bug #442.

-----------------------------------------------------------------

Mon 25-Aug-97   (JamesMa)

crtw32\misc\i386\chkesp.c
    New file: CRT component of KendricS's stack-checking routines - x86 only.
makefile.inc, crtw32\misc\lsources, srcrel\objects.mkf
    Added chkesp.obj.
srcrel\pd-b
    Added crtw32\misc\i386\chkesp.c.
libw32\msvcrt.src
    Added _chkesp.
fpw32\tran\i386\trig.asm
    Fix for VS98 bug #6160.

-----------------------------------------------------------------

Fri 22-Aug-97   (GregF)

crtw32\misc\inittime.c
    Get the time format string from Win32 rather than making up our own
    version. I don't know when this support went into NT, but it's in both
    NT 4.0 and Win95!
crtw32\time\strftime.c
    Added support for an AM/PM suffix to the time string.

-----------------------------------------------------------------

Fri 15-Aug-97   (GregF)

crtw32\h\tchar.h
libw32\include\tchar.h
    _ttoi64 now maps to _atoi64 (VC98 bug #1511)

crtw32\h\tchar.h
makefile
    Map _tcslen to _mbslen when _MBCS is defined (via alias record built by
    makefile) (VC98 bug #2729). Also, added comments to explain why this is
    not necessary for _tcscat, _tcscpy and _tcsdup.

crtw32\h\crtdbg.h, ctype.h, malloc.h, mbctype.h, stdio.h, stdlib.h, time.h
         wchar.h
libw32\include\crtdbg.h, ctype.h, malloc.h, mbctype.h, stdio.h, stdlib.h,
       time.h, wchar.h
    Strip out __p_ prototypes from the 'release' version of the header files.
    This addresses VC98 bug #2244

crtw32\h\crtdbg.h
libw32\include\crtdbg.h
    Moved the constant and type definitions out of the #ifndef _DEBUG - #else
    - #endif block. Thus, these constants and types are ALWAYS defined when
    the header is #include-d. This address VC98 #1400.

-----------------------------------------------------------------

Fri 15-Aug-97   (JamesMa)

stdhpp\functional, libw32\include\functional
    Fix for VC98 Bug #3140.
stdhpp\iosfwd, stdhpp\xmemory, libw32\include\iosfwd, libw32\include\xmemory
    Minor syntax clean-ups (VC98 Bug #1494).

-----------------------------------------------------------------

Thu 14-Aug-97   (JamesMa)

cleanbld.cmd, clns_bld.bat, makefile, srcrel\bldnt.cmd,
srcrel\bldwin95.bat, srcrel\external.mkf, srcrel\makefile
    V5TOOLS => V6TOOLS (VC98 bug #4064).
srcrel\mkclnmkf.c, srcrel\_sample_.r
    Revved version numbers from 4.0 to 6.0 (VC98 bug #4064).
srcrel\_sample_.rc
    Revved version numbers from 5.0 to 6.0 (VC98 bug #4064).
crtw32\convert\_fptostr.c
    strcpy() replaced by memmove() (VC98 Bug #1473).
crtw32\h\new.h, libw32\include\new.h
    set_new_handler() now __cdecl. (VC98 Bug #3034).
crtw32\h\strstrea.h, libw32\include\strstrea.h
    Title in comment now "strstrea.h", not "strstream.h" (VCBug #3133).
crtw32\heap\handler.cpp, crtw32\heap\setnewh.cpp, crtw32\heap\new_mode.cpp
    All routines now appropriately __cdecl.
crtw32\stdcpp\x{f|l}[cosh|sinh|exp].c
    All routines now appropriately __cdecl (VCBug #6039).
crtw32\stdhpp\ymath.h, libw32\include\ymath.h
    All routines now appropriately __cdecl (VCBug #6039);
    unwanted prototypes for _Log & _Sin removed.
crtw32\stdhpp\istream, libw32\include\istream
    Fix for VCBug #1308.
crtw32\stdhpp\limits, libw32\include\limits
    "ignaling" => "signaling" (VCBug #3112).
crtw32\stdhpp\xstring, libw32\include\xstring
    _Nullstr now __cdecl (VCBug #438).

-----------------------------------------------------------------

Fri 08-Aug-97   (GregF)

crtw32\stdio\tmpfile.c
    Removed unused local from the multithread version of _ttmpfile(). The new
    and much pickier frontend issued a warning and broke our build. Also,
    detab-ed it.

crtw32\dllstuff\crtlib.c
    Rearranged ifdef-s so the local, ptd, is only defined when ANSI_NEW_HANDLER
    is defined (which is the only case where it is needed).

-----------------------------------------------------------------

Thu 07-Aug-97   (JamesMa)

crtw32\stdhpp\xstring
    Fixed memory overwrite problem (VC98 bugs 1451 & 3159).

crtw32\eh\ehveccvb.cpp, frame.cpp, unhandld.cpp, user.cpp
    Disabled new compiler warning C4191.

crtw32\eh\rtti.cpp, fpw32\conv\cvt.c, fpw32\conv\tenpow.c, crtw32\stdhpp\ostream
    Removed unused locals to avoid new compiler warning C4189.

crtw32\h\internal.h, crtw32\heap\sbheap.c, crtw32\stdcpp\xdscale, crtw32\stdcpp\xfdscale.cpp
    Minor modifications to avoid new compiler warning c4554.

-----------------------------------------------------------------

Wed 06-Aug-97   (GregF)

crtw32\startup\crt0.c, crt0dat.c
    Moved definition of __mbsctype_initialized from crt0.c to crt0dat.c

-----------------------------------------------------------------

Tue 15-July-97   (JamesMa)

crtw32\h\sys\stat.h, libw32\include\sys\stat.h
    Restored oldnames for stat() & fstat() (VC98 bug 3809).

-----------------------------------------------------------------

Mon 07-July-97   (GregF)

crt60\makefile.sub
    Changed compiler opt switch to 'size' rather than 'speed'.

crt60\crtw32\misc\getqloc.c
    Made use of a suggestion of Dean McCrory's, the arrays of data are now
    __declspec( selectany ) (note that I had to make all of them global in
    order to do this). This allows the linker to eliminate them from the load
    image when possible (don't ask, it's voodoo to me too).

-----------------------------------------------------------------
Mon 30-Jun-97	(v-jfujii)

fpw32\tran\alpha\dpml_exc.c
     fixes a bug found in the previous version checked in

fpw32\tran\alpha\captcont.s, dpml_com.s
     latest release of the above files.  actually dpml_com.s did not change.

-----------------------------------------------------------------

Mon 23-Jun-97   (v-jfujii)

fpw32\tran\lsources
     added alpha-specific assembler flag

fpw32\tran\alpha\cabs.s, cabsf.s
     replace previous checkin of wrong versions of the above files

fpw32\tran\alpha\dpml_exc.c
     checkin the latest dpml_exc.c

-----------------------------------------------------------------

Mon 23-June-97   (GregF)

crtw32\h\math.h
    Fixed minor typo introduced by DEC checkin on 6/19. Inline acosf() body
    was missing ';'. Oddly, the cleansed libw32\include\math.h didn't have the
    typo!

-----------------------------------------------------------------

Fri 20-Jun-97   (v-kimpe)

fpw32\tran\alpha\*.s
     update all files with the latest.  this fixes a number of exception
     handling problems

-----------------------------------------------------------------

Fri 20-June-97   (GregF)

crtw32\startup\mlock.c
crtw32\stdio\_file.c
    Moved stdio-level file locking from mlock.c to _file.c. While in mlock.c,
    it caused most of stdio to be pulled into any multithread app, whether
    the app actually used stdio-level i/o or not.

-----------------------------------------------------------------

Fri 13-June-97   (GregF)

makefile.inc

crtw32\misc\aw_cmp.c -> a_cmp.c and w_cmp.c
            aw_env.c -> a_env.c and w_env.c
            aw_loc.c -> a_loc.c and w_loc.c
            aw_map.c -> a_map.c and w_map.c
            aw_str.c -> a_str.c and w_str.c

doc\copysrc.bat

srcrel\pd-b

    Split the multibyte and wide character versions into different source
    files. Also, replaced the use of malloc/free with _alloca and cleaned
    up some brain-damage in the code.

-----------------------------------------------------------------

Wed 04-June-97   (JamesMa)

crtw32\makefile.inc
crtw32\stdcpp\delop_s.cpp, newop_s.cpp, newop2_s.cpp
    Static components of msvcprt.lib now built with .pdb info in msvcprt[d].pdb
crtw32\stdcpp\dlldef.cpp
    Cleaned up export of basic_ostream<wchar_t ...> insertion operator.
crtw32\stdhpp\xlocale
    Added export of ctype<wchar_t>
crtw32\stdhpp\fstream
    Cosmetic change only - bogus _Fiopen() member removed altogether.

-----------------------------------------------------------------

Mon 02-Jun-97   (Richk)

crtw32\h\winheap.h
crtw32\heap\calloc.c, expand.c, free.c, heapchk.c, heapinit.c, heapmin.c,
            malloc.c, msize.c, realloc.c, sbheap.c
crtw32\misc\dbgheap.c
    Implemented new small-block heap scheme.

-----------------------------------------------------------------

Thu 22-May-97   (JamesMa)

crtw32\makefile
crtw32\stdcpp\dlldef.cpp, fiopen.cpp, locale.cpp, xlocale.cpp, wlocale.cpp
crtw32\stdhpp\complex, fstream, ios, iosfwd, istream, locale, ostream,
        sstream, streambuf, string, typeinfo, utility, xcomplex,
        xlocale, xlocmon, xlocnum, xloctime, xstring
libw32\include\complex, fstream, ios, iosfwd, istream, locale, ostream,
        sstream, streambuf, string, typeinfo, utility, xcomplex,
        xlocale, xlocmon, xlocnum, xloctime, xstring
libw32\msvcprt.src, msvcp60.rc (new file)
srcrel\external.mkf, mkclnmkf.c, objects.mkf, pd-b

    This package of changes restores most of the exports missing from
    msvcp50[d].dll as a result of changes to the post-VC++5.0 compiler
    and renames the C++ .dll to msvcp60[d].dll

-----------------------------------------------------------------

Mon 12-May-97   (Richk)

crtw32\stdcpp\dlldef.cpp
    Provided basic_string npos defintion flavor for VC 5.0 compiler.

-----------------------------------------------------------------

Mon 12-May-97   (JamesMa)

crtw32\stdhpp\locale, crtw32\stdhpp\xlocnum, libw32\include\locale, libw32\include\xlocnum
    Inline 2-parameter isdigit() moved from locale to xlocnum.

-----------------------------------------------------------------

Mon 21-Apr-97   (JamesMa)

crtw32\h\crtdbg.h, libw32\include\crtdbg.h
    4-parameter operator delete() now #ifdef _MSC_VER >=1200.
crtw32\stdcpp\string.cpp, strstrea.cpp, wiostrea.cpp,
        iomanip.cpp, iostream.cpp, fiopen.cpp
    Added #include <locale> to pick up 2-param isdigit().

-----------------------------------------------------------------

Tue 22-Apr-97   (JamesMa)

libw32\include\crtdbg.h, libw32\include\new.h, libw32\include\new,
        libw32\include\string, libw32\include\xlocnum
    Updated with yesterday's changes.

-----------------------------------------------------------------

Mon 21-Apr-97   (JamesMa)

crtw32\h\crtdbg.h
    Added operator delete() corresponding to debug operator new().
crtw32\h\new.h, crtw32\stdhpp\new
    Placement delete() now #if _MSC_VER > 1200
crtw32\stdcpp\dlldef.cpp,crtw32\stdhpp\string, crtw32\stdhpp\xlocnum
    Syntax modified to agree with 6.0 compiler.

-----------------------------------------------------------------

Fri 18-Apr-97   (JamesMa)

crtw32\eh\frame.cpp
    In __InternalCxxFrameHandler(), 'recursive' changed to BOOLEAN.
crtw32\h\new.h, crtw32\stdhpp\new, libw32\include\new.h, libw32\h\new
    Placement operator delete() added.
crtw32\heap\sbheap.c, crtw32\mbstring\mbctype.c, crtw32\stdio\fputwc.c,
        crtw32\stdio\fgetwc.c, crtw32\stdcpp\strstrea.cpp, crtw32\stdcpp\xmbtowc.c,
        crtw32\stdcpp\xdscale.c, crtw32\stdcpp\xfdscale.c, crtw32\stdhpp\xlocale,
        libw32\include\xlocale, crtw32\stdhpp\xlocmon, libw32\include\xlocmon,
        crtw32\stdhpp\xlocnum, libw32\include\xlocnum, crtw32\stdhpp\xloctime,
        libw32\include\xloctime, crtw32\stdhpp\fstream, libw32\include\fstream,
        crtw32\stdhpp\istream, libw32\include\istream, crtw32\stdhpp\xlocale,
        libw32\include\xlocale, crtw32\stdhpp\iosfwd, libw32\include\iosfwd
    Explicit casts added to avoid new C4242 warnings.

-----------------------------------------------------------------

Fri 18-Apr-97   (GregF)

crtw32\h\stdlib.h, internal.h
libw32\include\stdlib.h
    Restored macros (see change notes for April 4, below) for _[w]pgmptr and
    _[w]initenv.

-----------------------------------------------------------------

Fri 04-Apr-97   (GregF)

crtw32\h\stdlib.h
libw32\include\stdlib.h
    Restored some of the macros defining globals as dereferenced functions in
    the DLL (removed as part of the change below). These may be useful in
    later performance work.

-----------------------------------------------------------------

Mon 31-Mar-97	(GregF)

crtw32\h\assert.h, cmsgs.h, conio.h, crtdbg.h, cruntime.h, ctime.h, ctype.h,
         cvt.h, dbgint.h, direct.h, dos.h, dostypes.h, eh.h, ehassert.h,
         ehhooks.h, ehstate.h, errmsg.h, errno.h, excpt.h, fcntl.h, file2.h,
         float.h, fltintrn.h, fpieee.h, fstream.h, heap.h, internal.h, io.h,
         iomanip.h, ios.h, iostream.h, istream.h, limits.h, locale.h,
         malloc.h, math.h, mbctype.h, mbdata.h, mbstring.h, memory.h,
         minmax.h, msdos.h, mtdll.h, mtest.h, new.h, nlsint.h, oscalls.h,
         ostream.h, plstring.h, process.h, rterr.h, rtti.h, search.h,
         setjmp.h, setjmpex.h, setlocal.h, share.h, signal.h, sizeptr.h,
         stdarg.h, stddef.h, stdexcpt,h, stdio.h, stdiostr.h, stdlib.h,
         streamb.h, string.h, strstrea.h, syserr.h, tchar.h, time.h,
         trnsctrl.h, typeinfo.h, useoldio.h, v2tov3.h, varargs.h, wchar.h,
         winheap.h

crtw32\h\sys\stat.h, timeb.h, types.h, utime.h

crtw32\stdhpp\wctype.h

libw32\include\*.h (headers corresponding to the ones listed above)

    Large package of minor changes. I deleted the support for/usage of the
    obsolete macros: _CALLTYPE*, _CRTAPI*, DLL_FOR_WIN32S and _NTSDK. I also
    removed other macros supporting Win32s. Where appropriate I replaced
    defined(_M_MPPC) && defined(_M_M68K) with defined(_MAC). I detab-ed the
    headers and made other minor cosmetic changes while I was at it.

-----------------------------------------------------------------

Thu 27-Mar-97	(Richk)

crtw32\convert\isctype.c
crtw32\convert\tolower.c
crtw32\convert\toupper.c
crtw32\dllstuff\crtlib.c
crtw32\dllstuff\imp_data.c
crtw32\dllstuff\macdll\msvcrt.def
crtw32\dllstuff\macdll\msvcrtd.def
crtw32\h\awint.h
crtw32\h\mbctype.h
crtw32\h\mbdata.h
crtw32\mbstring\ismbalnm.c
crtw32\mbstring\ismbalph.c
crtw32\mbstring\ismbdgt.c
crtw32\mbstring\ismbgrph.c
crtw32\mbstring\ismblwr.c
crtw32\mbstring\ismbprn.c
crtw32\mbstring\ismbpunc.c
crtw32\mbstring\ismbspc.c
crtw32\mbstring\ismbupr.c
crtw32\mbstring\mbctype.c
crtw32\mbstring\mbsicmp.c
crtw32\mbstring\mbslwr.c
crtw32\mbstring\mbsnbicm.c
crtw32\mbstring\mbsnicmp.c
crtw32\mbstring\mbsupr.c
crtw32\mbstring\mbtolwr.c
crtw32\mbstring\mbtoupr.c
crtw32\misc\aw_map.c
crtw32\misc\aw_str.c
crtw32\misc\initctyp.c
crtw32\stdcpp\_tolower.c
crtw32\stdcpp\_toupper.c
crtw32\stdcpp\xstrxfrm.c
crtw32\string\strlwr.c
crtw32\string\strupr.c
crtw32\string\strxfrm.c
libw32\include\mbctype.h
    Calling _setmbcp with a single-byte codepage now uses that
    codepage for upper/lowercase translations for OEM characters.

-----------------------------------------------------------------

Tue 18-Mar-97	(v-JohnMo)

crtw32\eh\ppc\handlers.s
crtw32\helper\ppc\memcpy_.s
crtw32\startup\ppc\chkstk.s
crtw32\string\ppc\memmovep.s
fpw32\include\trans.h
fpw32\tran\ppc\fpctrl.s
fpw32\tran\ppc\sqrtp.s
    Various late fixes for PowerPC/NT specific code.

-----------------------------------------------------------------

Mon 26-Feb-97	(Richk)

crtw32\misc\getqloc.c
    Fixes to make Win95 operation compatible with shipped CRT version.

-----------------------------------------------------------------

Mon 21-Feb-97	(Richk)

crtw32\misc\getqloc.c
    Fixed problem for where language string starting with nonletter
    returned default locale instead of error.

-----------------------------------------------------------------

Wed 19-Feb-97	(GregF)

crtw32\startup\dllcrt0.c
    Deleted obsolete test for Win32s and PharLap's TNT. Also, made a few
    cosmetic changes.

-----------------------------------------------------------------

Mon 17-Feb-97	(Richk)

crtw32\misc\aw_cmp.c, aw_loc.c, aw_map.c, aw_str.c
    For the ANSI versions of the CRT routines, try to use the WIDE NLS
    calls before trying the ANSI versions.  This will permit Windows NT
    program to use the WIDE NLS routines so the current codepage can
    be used to translate the parameters strings from/to Unicode.  Using
    the ANSI NLS calls use only the ANSI codepage, causing incorrect
    results.
crtw32\misc\getqloc.c
    Complete rewrite of module to qualify CRT locale strings.  The
    system LCIDs are now enumerated instead of using a fixed table, so
    new locales can be recognized dynamically.  Fixed random errors of
    incorrect language/country translations.
crtw32\h\setlocal.h
    Changed CP_MAX_LEN to 8 to handle 5-digit codepage numbers.
    Commented out now-unused definitions for getqloc.c.

-----------------------------------------------------------------

Mon 11-Feb-97	(v-KimPe)

crtw32\eh\alpha\bridge.s
crtw32\eh\alpha\trnsctrl.cpp
crtw32\h\trnsctrl.h
crtw32\misc\alpha\chandler.c
crtw32\misc\alpha\ghandler.c
crtw32\misc\alpha\jmpuwind.s
crtw32\misc\alpha\longjmp.s
    change _NLG* declarations to __NLG* to match the changes in the debugger

-----------------------------------------------------------------

Mon 11-Feb-97	(v-KimPe)

fpw32\tran\lsources
fpw32\tran\sources.nt
fpw32\tran\alpha\rsqrt.s
fpw32\tran\alpha\rsqrtf.s
libw32\msvcrt.src
srcrel\makefile
srcrel\pd-b
    Added Alpha __rsqrt and __rsqrtf functions which are called by compiler
    This was fixed on the side for the Alpha VC 5.0 product.
    Corrected makefile to use crt60 tree.  This resulted in some significant
    changes to pd-b:
        mssccprj.scc files removed
        lego subdirectories added to lib\[platform] directories
        libw32\msvcp42.rc added
        libw32\lib\i386\win32s subdirectory added
        log_v50.txt added

-----------------------------------------------------------------

Mon 11-Feb-97	(v-KimPe)

crtw32\h\math.h
libw32\include\math.h
    Separated Alpha single precision math declarations from MIPS to allow
    intrinsics to be applied to them. This was fixed on the side for the
    Alpha VC 5.0 product.

-----------------------------------------------------------------

Mon 11-Feb-97	(v-KimPe)

fpw32\tran\alpha\atan2f.s
fpw32\tran\alpha\atan2s.s
fpw32\tran\alpha\cotf.s
fpw32\tran\alpha\f_atan2.s
fpw32\tran\alpha\f_atan2f.s
fpw32\tran\alpha\f_hypot.s
fpw32\tran\alpha\f_hypotf.s
fpw32\tran\alpha\f_sqrt.s
fpw32\tran\alpha\f_sqrtf.s
fpw32\tran\alpha\fmodf.s
fpw32\tran\alpha\fmods.s
fpw32\tran\alpha\hypotf.s
fpw32\tran\alpha\hypots.s
fpw32\tran\alpha\j0f.s
fpw32\tran\alpha\j1f.s
fpw32\tran\alpha\jnf.s
fpw32\tran\alpha\log10f.s
fpw32\tran\alpha\log10s.s
fpw32\tran\alpha\logbf.s
fpw32\tran\alpha\logf.s
fpw32\tran\alpha\logs.s
fpw32\tran\alpha\nextaftf.s
fpw32\tran\alpha\powf.s
fpw32\tran\alpha\pows.s
fpw32\tran\alpha\sqrtf.s
fpw32\tran\alpha\sqrts.s
fpw32\tran\alpha\tanhf.s
fpw32\tran\alpha\trig_rdx.s
fpw32\tran\alpha\y0f.s
fpw32\tran\alpha\y1f.s
fpw32\tran\alpha\ynf.s
    Corrected alignment in assembly code to before the label, instead of
    after.  This caused error in sqrt(0) as well as returning a null
    function name with matherr. This was fixed on the side for the Alpha
    VC 5.0 product. This fixes DevStudio96 22172

-----------------------------------------------------------------

Mon 10-Feb-97	(GregF)

crtw32\stdio\_sftbuf.c
    Added code to better handle it when malloc fails while attempting to
    allocate the buffer. In this case, temporarily use the _charbuf field
    as the buffer. This fixes NTBUG #20000.

-----------------------------------------------------------------

Mon 20-Jan-97	(GregF)

crtw32\startup\crt0.c
    Changed startup code so if _heapinit() or _mtinit() fails, ExitProcess
    is called directly rather than _exit() (_exit uses a lock!). This was NT
    RAID #51100.

crtw32\startup\tidtable.c
    Changed _freeptd() so the thread's copy of the exception-action table is
    freed up. This was DevStudio96 #20282.

-----------------------------------------------------------------

Fri 10-Jan-97	(JamesMa)

log.txt -> log_v50.txt
	Renamed old LOG.TXT from V5.0 and started a new LOG.TXT (this file).

-----------------------------------------------------------------


***************************************************************************
***************************************************************************
***									***
***  This file contains the history for MSVC++ v6.0 (relative to v5.0)	***
***  The file should always be edited at the top so that the most	***
***  recent changes are at the beginning of the file and the oldest	***
***  changes are at the end of the file.  This comment marks the end.	***
***									***
***************************************************************************
***************************************************************************

