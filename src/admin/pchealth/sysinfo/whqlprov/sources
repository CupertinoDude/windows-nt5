!ifdef PROJECT_ROOT
! INCLUDE $(PROJECT_ROOT)\pchealth\build\paths.all
!else
! INCLUDE $(INETROOT)\build\paths.all
!endif

MAJORCOMP=SysInfo
MINORCOMP=WhqlProv

TARGETNAME=WhqlProv
TARGETPATH=obj
TARGETTYPE=DYNLINK
DLLBASE=$(DEFBASEADDR)
DLLDEF=WhqlProv.def
DLLENTRY=_DllMainCRTStartup
UMTYPE=windows
ATL_VER=30

PRECOMPILED_INCLUDE = stdafx.h
PRECOMPILED_CXX = 1
PRECOMPILED_PCH=stdafx.pch
PRECOMPILED_OBJ=stdafx.obj

#USER_C_FLAGS=-GX -DMSINFO_TEST_WORKFROMLOCALURLS
#USER_C_FLAGS=-GX -D_USRDLL -D_UNICODE -D_WINDLL -D_AFXDLL -D_DEBUG -D_WINDOWS

#C_DEFINES=$(C_DEFINES) -DWIN32 -DUNICODE -D_UNICODE -DAFXDLL
C_DEFINES=$(C_DEFINES) -DWIN32 -D_WINDOWS -D_WINDLL -D_AFXDLL -D_USRDLL -D_UNICODE

!if !$(FREEBUILD)
#C_DEFINES=$(C_DEFINES) -D_DEBUG
!else
#C_DEFINES=$(C_DEFINES) -D_NDEBUG
!endif

!if !$(FREEBUILD)
USE_PDB=1
NTDEBUG=ntsd
NTDEBUGTYPE=both
MSC_OPTIMIZATION=-Odi
MSC_WARNING_LEVEL=/W4
MSC_WARNING_LEVEL=/W3 /WX
BROWSER_INFO=1
!endif


USE_STATIC_ATL=1
USE_MFC=1
USE_MSVCRT=1
USE_MFCUNICODE=1

NTTARGETFILES=

SOURCES= \
		WhqlProv.idl\
		issigned.Cpp\
		WhqlObj.cpp\
		WhqlProv.cpp\
		WhqlProv.rc\

INCLUDES= \
        $(LOCALLIBPATH); \
        $(LOCALROOT)\common; \
        $(INETROOT)\HelpCtr\Service\include; \
        $(INETROOT)\HelpCtr\target\$(O);

INCLUDES=$(BASEDIR)\public\sdk\inc\mfc42;$(BASEDIR)\public\sdk\inc;..\include;

#MIDL_TLBDIR=$(LOCALLIBPATH)
#PASS0_SOURCEDIR=$(LOCALLIBPATH)
#PASS0_HEADERDIR=$(LOCALLIBPATH)

TARGETLIBS= \
	$(SDKLIBPATH)\shell32.lib \
	$(SDKLIBPATH)\ole32.lib \
	$(SDKLIBPATH)\oleaut32.lib \
	$(SDKLIBPATH)\uuid.lib \
	$(SDKLIBPATH)\odbc32.lib \
	$(SDKLIBPATH)\odbccp32.lib \
	$(SDKLIBPATH)\wbemuuid.lib \
	$(SDKLIBPATH)\WinTrust.lib \
	$(SDKLIBPATH)\setupapi.lib \
	$(SDKLIBPATH)\advapi32.lib \
	$(SDKLIBPATH)\crypt32.lib \
	$(SDKLIBPATH)\version.lib \
        

!INCLUDE $(INETROOT)\build\sources.all