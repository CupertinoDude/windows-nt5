// charmap.c
// Angshuman Guha, aguha
// Jan 12, 1999
// Modified June 5, 2000: added £ and euro, deleted a whole bunch of "continue" nodes

#include "common.h"
#include "charmap.h"

#define COUTPUT 175

const BYTE rgCharToOutputNode[2*256] = {
	// the first number is the beginning-activation node
	// the second number is the continuing-activation node
	// the value 255 means there is no output node
	// Of the 95 printable ASCII, the following don't have a continuing-activation node
	//		space ' ( ) , - . / < > [ \ ] ^ _ ` { | } 
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	  0, 255, // space
	  5,   6, // ! 
	 11,  12, // " 
	 27,  28, // # 
	  7,   8, // $ 
	 29,  30, // % 
	 31,  32, // & 
	  9, 255, // ' 
	 13, 255, // ( 
	 14, 255, // ) 
	 33,  34, // * 
	 35,  36, // + 
	  2, 255, // , 
	 15, 255, // - 
	  1, 255, // . 
	 21, 255, // / 
	 51,  52, // 0 
	 53,  54, // 1 
	 55,  56, // 2 
	 57,  58, // 3 
	 59,  60, // 4 
	 61,  62, // 5 
	 63,  64, // 6 
	 65,  66, // 7 
	 67,  68, // 8 
	 69,  70, // 9 
	 17,  18, // : 
	 19,  20, // ; 
	 37, 255, // < 
	 38,  39, // = 
	 40, 255, // > 
	  3,   4, // ? 
	 41,  42, // @ 
	123, 124, // A 
	125, 126, // B 
	127, 128, // C 
	129, 130, // D 
	131, 132, // E 
	133, 134, // F 
	135, 136, // G 
	137, 138, // H 
	139, 140, // I 
	141, 142, // J 
	143, 144, // K 
	145, 146, // L 
	147, 148, // M 
	149, 150, // N 
	151, 152, // O 
	153, 154, // P 
	155, 156, // Q 
	157, 158, // R 
	159, 160, // S 
	161, 162, // T 
	163, 164, // U 
	165, 166, // V 
	167, 168, // W 
	169, 170, // X 
	171, 172, // Y 
	173, 174, // Z 
	 43, 255, // [ 
	 22, 255, // \ 
	 44, 255, // ] 
	 45, 255, // ^ 
	 16, 255, // _ 
	 10, 255, // ` 
	 71,  72, // a 
	 73,  74, // b 
	 75,  76, // c 
	 77,  78, // d 
	 79,  80, // e 
	 81,  82, // f 
	 83,  84, // g 
	 85,  86, // h 
	 87,  88, // i 
	 89,  90, // j 
	 91,  92, // k 
	 93,  94, // l 
	 95,  96, // m 
	 97,  98, // n 
	 99, 100, // o 
	101, 102, // p 
	103, 104, // q 
	105, 106, // r 
	107, 108, // s 
	109, 110, // t 
	111, 112, // u 
	113, 114, // v 
	115, 116, // w 
	117, 118, // x 
	119, 120, // y 
	121, 122, // z 
	 46, 255, // { 
	 47, 255, // | 
	 48, 255, // } 
	 49,  50, // ~ 
	255, 255,
	 25,  26, // euro
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	  0, 255, // NBSP maps to space
	255, 255,
	255, 255,
	 23,  24, // £ 
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
	255, 255,
};

const unsigned char rgOutputNodeToChar[2*COUTPUT] = {
	// the first number is 0 for char-continuation node, 1 for char-beginning node
	// the second number is the character

	// space
	1, ' ', // 0

	// common punc
	1, '.', // 1
	1, ',', // 2
	1, '?', // 3
	0, '?', // 4
	1, '!', // 5
	0, '!', // 6
	1, '$', // 7
	0, '$', // 8
	1, '\'',// 9
	1, '`', // 10
	1, '"', // 11
	0, '"', // 12
	1, '(', // 13
	1, ')', // 14
	1, '-', // 15
	1, '_', // 16
	1, ':', // 17
	0, ':', // 18
	1, ';', // 19
	0, ';', // 20
	1, '/', // 21
	1, '\\',// 22
	1, '£', // 23
	0, '£', // 24
	1, '€', // 25 euro
	0, '€', // 26 euro

	// rare punc
	1, '#', // 27
	0, '#', // 28
	1, '%', // 29
	0, '%', // 30
	1, '&', // 31
	0, '&', // 32
	1, '*', // 33
	0, '*', // 34
	1, '+', // 35
	0, '+', // 36
	1, '<', // 37
	1, '=', // 38
	0, '=', // 39
	1, '>', // 40
	1, '@', // 41
	0, '@', // 42
	1, '[', // 43
	1, ']', // 44
	1, '^', // 45
	1, '{', // 46
	1, '|', // 47
	1, '}', // 48
	1, '~', // 49
	0, '~', // 50

	// digits
	1, '0', // 51
	0, '0', // 52
	1, '1', // 53
	0, '1', // 54
	1, '2', // 55
	0, '2', // 56
	1, '3', // 57
	0, '3', // 58
	1, '4', // 59
	0, '4', // 60
	1, '5', // 61
	0, '5', // 62
	1, '6', // 63
	0, '6', // 64
	1, '7', // 65
	0, '7', // 66
	1, '8', // 67
	0, '8', // 68
	1, '9', // 69
	0, '9', // 70

	// lowercase alphabets
	1, 'a', // 71
	0, 'a', // 72
	1, 'b', // 73
	0, 'b', // 74
	1, 'c', // 75
	0, 'c', // 76
	1, 'd', // 77
	0, 'd', // 78
	1, 'e', // 79
	0, 'e', // 80
	1, 'f', // 81
	0, 'f', // 82
	1, 'g', // 83
	0, 'g', // 84
	1, 'h', // 85
	0, 'h', // 86
	1, 'i', // 87
	0, 'i', // 88
	1, 'j', // 89
	0, 'j', // 90
	1, 'k', // 91
	0, 'k', // 92
	1, 'l', // 93
	0, 'l', // 94
	1, 'm', // 95
	0, 'm', // 96
	1, 'n', // 97
	0, 'n', // 98
	1, 'o', // 99
	0, 'o', // 100
	1, 'p', // 101
	0, 'p', // 102
	1, 'q', // 103
	0, 'q', // 104
	1, 'r', // 105
	0, 'r', // 106
	1, 's', // 107
	0, 's', // 108
	1, 't', // 109
	0, 't', // 110
	1, 'u', // 111
	0, 'u', // 112
	1, 'v', // 113
	0, 'v', // 114
	1, 'w', // 115
	0, 'w', // 116
	1, 'x', // 117
	0, 'x', // 118
	1, 'y', // 119
	0, 'y', // 120
	1, 'z', // 121
	0, 'z', // 122

	// uppercase alphabets
	1, 'A', // 123
	0, 'A', // 124
	1, 'B', // 125
	0, 'B', // 126
	1, 'C', // 127
	0, 'C', // 128
	1, 'D', // 129
	0, 'D', // 130
	1, 'E', // 131
	0, 'E', // 132
	1, 'F', // 133
	0, 'F', // 134
	1, 'G', // 135
	0, 'G', // 136
	1, 'H', // 137
	0, 'H', // 138
	1, 'I', // 139
	0, 'I', // 140
	1, 'J', // 141
	0, 'J', // 142
	1, 'K', // 143
	0, 'K', // 144
	1, 'L', // 145
	0, 'L', // 146
	1, 'M', // 147
	0, 'M', // 148
	1, 'N', // 149
	0, 'N', // 150
	1, 'O', // 151
	0, 'O', // 152
	1, 'P', // 153
	0, 'P', // 154
	1, 'Q', // 155
	0, 'Q', // 156
	1, 'R', // 157
	0, 'R', // 158
	1, 'S', // 159
	0, 'S', // 160
	1, 'T', // 161
	0, 'T', // 162
	1, 'U', // 163
	0, 'U', // 164
	1, 'V', // 165
	0, 'V', // 166
	1, 'W', // 167
	0, 'W', // 168
	1, 'X', // 169
	0, 'X', // 170
	1, 'Y', // 171
	0, 'Y', // 172
	1, 'Z', // 173
	0, 'Z'  // 174
};

/*
BYTE BeginChar2Out(char ch)
{
	BYTE x;

	x = rgCharToOutputNode[2*(ch)];
	ASSERT(x < COUTPUT);
	return x;
}

BYTE ContinueChar2Out(char ch)
{
	BYTE x;

	x = rgCharToOutputNode[2*(ch)+1];
	ASSERT(x < COUTPUT);
	return x;
}
*/