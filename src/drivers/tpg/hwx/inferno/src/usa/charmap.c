// charmap.c
// Angshuman Guha, aguha
// Jan 12, 1999
// Modified June 5, 2000: added £ and euro, deleted a whole bunch of "continue" nodes
//Modified by Mango Dec,10,2001:added the ¥,¢,°
#include "common.h"
#include "charmap.h"

#define COUTPUT 180

const BYTE rgCharToOutputNode[2*256] = {
	// the first number is the beginning-activation node
	// the second number is the continuing-activation node
	// the value 255 means there is no output node
	// Of the 95 printable ASCII, the following don't have a continuing-activation node
	//		space ' ( ) , - . / < > [ \ ] ^ _ ` { | } 
	255, 255, //0
	255, 255, //1
	255, 255,  //2
	255, 255,  //3
	255, 255,  //4
	255, 255,  //5
	255, 255,  //6
	255, 255,  //7
	255, 255,  //8
	255, 255,  //9
	255, 255,  //10
	255, 255,  //11		
	255, 255,	//12
	255, 255,	//13
	255, 255,	//14
	255, 255,	//15
	255, 255,	//16
	255, 255,	//17	
	255, 255,	//18	
	255, 255,	//19
	255, 255,	//20
	255, 255,	//21
	255, 255,	//22
	255, 255,	//23
	255, 255,	//24
	255, 255,	//25
	255, 255,	//26
	255, 255,	//27
	255, 255,	//28
	255, 255,	//29
	255, 255,	//30
	255, 255,	//31
	  0, 255, // space	//32
	  5,   6, // ! //33
	 11,  12, // " //34
	 27,  28, // # //35
	  7,   8, // $  //36
	 29,  30, // %   //37
	 31,  32, // &   //38
	  9, 255, // '   //39
	 13, 255, // (	 //40
	 14, 255, // )	//41
	 33,  34, // *	//42
	 35,  36, // +	//43
	  2, 255, // ,	//44
	 15, 255, // -	45
	  1, 255, // .  46
	 21, 255, // /	47
	 51,  52, // 0	48
	 53,  54, // 1	49
	 55,  56, // 2	50
	 57,  58, // 3	51
	 59,  60, // 4	52
	 61,  62, // 5	53
	 63,  64, // 6	54
	 65,  66, // 7	55
	 67,  68, // 8	56
	 69,  70, // 9	57
	 17,  18, // :	58
	 19,  20, // ;	59
	 37, 255, // <	60
	 38,  39, // =	61
	 40, 255, // >	62
	  3,   4, // ?	63
	 41,  42, // @	64
	123, 124, // A	65
	125, 126, // B	66
	127, 128, // C	67
	129, 130, // D  68
	131, 132, // E	69
	133, 134, // F	70
	135, 136, // G	71
	137, 138, // H	72 
	139, 140, // I	73
	141, 142, // J	74
	143, 144, // K	75
	145, 146, // L	76
	147, 148, // M	77
	149, 150, // N	78
	151, 152, // O	79
	153, 154, // P	80
	155, 156, // Q	81
	157, 158, // R	82
	159, 160, // S	83
	161, 162, // T	84
	163, 164, // U	85
	165, 166, // V	86
	167, 168, // W	87
	169, 170, // X	88
	171, 172, // Y	89
	173, 174, // Z	90
	 43, 255, // [	91
	 22, 255, // \	92
	 44, 255, // ]	93
	 45, 255, // ^	94
	 16, 255, // _	95
	 10, 255, // `	96
	 71,  72, // a	97
	 73,  74, // b	98
	 75,  76, // c	99
	 77,  78, // d	100
	 79,  80, // e  101
	 81,  82, // f  102
	 83,  84, // g  103
	 85,  86, // h  104
	 87,  88, // i	105
	 89,  90, // j	106
	 91,  92, // k	107
	 93,  94, // l	108
	 95,  96, // m	109
	 97,  98, // n	110
	 99, 100, // o	111	
	101, 102, // p	112
	103, 104, // q	113
	105, 106, // r	114
	107, 108, // s	115
	109, 110, // t	116
	111, 112, // u	117
	113, 114, // v	118
	115, 116, // w	119	
	117, 118, // x	120
	119, 120, // y	121
	121, 122, // z	122
	 46, 255, // {	123
	 47, 255, // |	124
	 48, 255, // }	125
	 49,  50, // ~	126
	255, 255,		//127
	 25,  26, // euro 128
	255, 255,	//129
	255, 255,	//130
	255, 255,	//131
	255, 255,	//132
	255, 255,	//133
	255, 255,	//134
	255, 255,	//135
	255, 255,	//136
	255, 255,	//137
	255, 255,	//138
	255, 255,	//139
	255, 255,	//140
	255, 255,	//141
	255, 255,	//142
	255, 255,	//143
	255, 255,	//144
	255, 255,	//145
	255, 255,	//146
	255, 255,	//147
	255, 255,	//148
	255, 255,	//149
	255, 255,	//150
	255, 255,	//151
	255, 255,	//152
	255, 255,	//153
	255, 255,	//154
	255, 255,	//155
	255, 255,	//156
	255, 255,	//157
	255, 255,	//158
	255, 255,	//159
	  0, 255, // NBSP maps to space //160
	255, 255,	//161
	177, 178,	//¢ 162
	 23,  24, // £ //163
	255, 255,	//164
	175, 176,  //¥  165
	255, 255,	//166
	255, 255,	//167
	255, 255,	//168
	255, 255,	//169
	255, 255,	//170
	255, 255,	//171
	255, 255,	//172
	255, 255,	//173
	255, 255,	//174
	255, 255,	//175
	179, 255,	//°  176
	255, 255,	//177
	255, 255,	//178
	255, 255,	//179
	255, 255,	//180
	255, 255,   //181
	255, 255,	//182
	255, 255,	//183
	255, 255,	//184
	255, 255,	//185
	255, 255,	//186
	255, 255,	//187
	255, 255,	//188
	255, 255,	//189
	255, 255,	//190
	255, 255,	//191
	255, 255,	//192
	255, 255,	//193
	255, 255,	//194
	255, 255,	//195
	255, 255,	//196
	255, 255,	//197
	255, 255,	//198
	255, 255,	//199
	255, 255,	//200
	255, 255,	//201
	255, 255,	//202
	255, 255,	//203
	255, 255,	//204
	255, 255,	//205
	255, 255,	//206
	255, 255,	//207
	255, 255,	//208
	255, 255,	//209
	255, 255,	//210
	255, 255,	//211
	255, 255,	//212
	255, 255,	//213
	255, 255,	//214
	255, 255,	//215
	255, 255,	//216
	255, 255,	//217
	255, 255,	//218
	255, 255,	//219
	255, 255,	//220
	255, 255,	//221
	255, 255,	//222
	255, 255,	//223
	255, 255,	//224
	255, 255,	//225
	255, 255,	//226
	255, 255,	//227
	255, 255,	//228
	255, 255,	//229
	255, 255,	//230
	255, 255,	//231
	255, 255,	//232
	255, 255,	//233
	255, 255,	//234
	255, 255,	//235
	255, 255,	//236
	255, 255,	//237
	255, 255,	//238
	255, 255,	//239
	255, 255,	//240
	255, 255,	//241
	255, 255,	//242
	255, 255,	//243
	255, 255,	//244
	255, 255,	//245
	255, 255,	//246
	255, 255,	//247
	255, 255,	//248
	255, 255,	//249
	255, 255,	//250
	255, 255,	//251
	255, 255,	//252
	255, 255,	//253
	255, 255,	//254
	255, 255,   //255
};

const unsigned char rgOutputNodeToChar[2*COUTPUT] = {
	// the first number is 0 for char-continuation node, 1 for char-beginning node
	// the second number is the character

	// space
	1, ' ', // 0

	// common punc
	1, '.', // 1
	1, ',', // 2
	1, '?', // 3
	0, '?', // 4
	1, '!', // 5
	0, '!', // 6
	1, '$', // 7
	0, '$', // 8
	1, '\'',// 9
	1, '`', // 10
	1, '"', // 11
	0, '"', // 12
	1, '(', // 13
	1, ')', // 14
	1, '-', // 15
	1, '_', // 16
	1, ':', // 17
	0, ':', // 18
	1, ';', // 19
	0, ';', // 20
	1, '/', // 21
	1, '\\',// 22
	1, '£', // 23
	0, '£', // 24
	1, '€', // 25 euro
	0, '€', // 26 euro
	
	// rare punc
	1, '#', // 27
	0, '#', // 28
	1, '%', // 29
	0, '%', // 30
	1, '&', // 31
	0, '&', // 32
	1, '*', // 33
	0, '*', // 34
	1, '+', // 35
	0, '+', // 36
	1, '<', // 37
	1, '=', // 38
	0, '=', // 39
	1, '>', // 40
	1, '@', // 41
	0, '@', // 42
	1, '[', // 43
	1, ']', // 44
	1, '^', // 45
	1, '{', // 46
	1, '|', // 47
	1, '}', // 48
	1, '~', // 49
	0, '~', // 50

	// digits
	1, '0', // 51
	0, '0', // 52
	1, '1', // 53
	0, '1', // 54
	1, '2', // 55
	0, '2', // 56
	1, '3', // 57
	0, '3', // 58
	1, '4', // 59
	0, '4', // 60
	1, '5', // 61
	0, '5', // 62
	1, '6', // 63
	0, '6', // 64
	1, '7', // 65
	0, '7', // 66
	1, '8', // 67
	0, '8', // 68
	1, '9', // 69
	0, '9', // 70

	// lowercase alphabets
	1, 'a', // 71
	0, 'a', // 72
	1, 'b', // 73
	0, 'b', // 74
	1, 'c', // 75
	0, 'c', // 76
	1, 'd', // 77
	0, 'd', // 78
	1, 'e', // 79
	0, 'e', // 80
	1, 'f', // 81
	0, 'f', // 82
	1, 'g', // 83
	0, 'g', // 84
	1, 'h', // 85
	0, 'h', // 86
	1, 'i', // 87
	0, 'i', // 88
	1, 'j', // 89
	0, 'j', // 90
	1, 'k', // 91
	0, 'k', // 92
	1, 'l', // 93
	0, 'l', // 94
	1, 'm', // 95
	0, 'm', // 96
	1, 'n', // 97
	0, 'n', // 98
	1, 'o', // 99
	0, 'o', // 100
	1, 'p', // 101
	0, 'p', // 102
	1, 'q', // 103
	0, 'q', // 104
	1, 'r', // 105
	0, 'r', // 106
	1, 's', // 107
	0, 's', // 108
	1, 't', // 109
	0, 't', // 110
	1, 'u', // 111
	0, 'u', // 112
	1, 'v', // 113
	0, 'v', // 114
	1, 'w', // 115
	0, 'w', // 116
	1, 'x', // 117
	0, 'x', // 118
	1, 'y', // 119
	0, 'y', // 120
	1, 'z', // 121
	0, 'z', // 122

	// uppercase alphabets
	1, 'A', // 123
	0, 'A', // 124
	1, 'B', // 125
	0, 'B', // 126
	1, 'C', // 127
	0, 'C', // 128
	1, 'D', // 129
	0, 'D', // 130
	1, 'E', // 131
	0, 'E', // 132
	1, 'F', // 133
	0, 'F', // 134
	1, 'G', // 135
	0, 'G', // 136
	1, 'H', // 137
	0, 'H', // 138
	1, 'I', // 139
	0, 'I', // 140
	1, 'J', // 141
	0, 'J', // 142
	1, 'K', // 143
	0, 'K', // 144
	1, 'L', // 145
	0, 'L', // 146
	1, 'M', // 147
	0, 'M', // 148
	1, 'N', // 149
	0, 'N', // 150
	1, 'O', // 151
	0, 'O', // 152
	1, 'P', // 153
	0, 'P', // 154
	1, 'Q', // 155
	0, 'Q', // 156
	1, 'R', // 157
	0, 'R', // 158
	1, 'S', // 159
	0, 'S', // 160
	1, 'T', // 161
	0, 'T', // 162
	1, 'U', // 163
	0, 'U', // 164
	1, 'V', // 165
	0, 'V', // 166
	1, 'W', // 167
	0, 'W', // 168
	1, 'X', // 169
	0, 'X', // 170
	1, 'Y', // 171
	0, 'Y', // 172
	1, 'Z', // 173
	0, 'Z', // 174
	
	1, '¥', //175
	0, '¥', //176
	1, '¢', //177
	0, '¢', //178
	1, '°', //179

};

/*
BYTE BeginChar2Out(char ch)
{
	BYTE x;

	x = rgCharToOutputNode[2*(ch)];
	ASSERT(x < COUTPUT);
	return x;
}

BYTE ContinueChar2Out(char ch)
{
	BYTE x;

	x = rgCharToOutputNode[2*(ch)+1];
	ASSERT(x < COUTPUT);
	return x;
}
*/