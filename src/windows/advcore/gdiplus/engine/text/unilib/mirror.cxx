/**************************************************************************\
*
* Copyright (c) 2000  Microsoft Corporation
*
* Module Name:
*
*   Mirrored Helper
*
* Abstract:
*
*   Contains Mirrorred codepoints helper routines
*
*
* Revision History:
*
*   05/15/2000 Mohamed Sadek [msadek]
*       Created it.
*
\**************************************************************************/
#include "windows.h"
    const INT acc_00[256] = // U+00xx
    {
    //0    1      2      3      4      5      6      7      8      9      A      B      C      D      E      F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 00 - 0F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 10 - 1F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0029,0x0028,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 20 - 2F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x003E,0x0000,0x003C,0x0000, // 30 - 3F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 40 - 4F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x005D,0x0000,0x005B,0x0000,0x0000, // 50 - 5F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 60 - 6F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x007D,0x0000,0x007B,0x0000,0x0000, // 70 - 7F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 80 - 8F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 90 - 9F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x00BB,0x0000,0x0000,0x0000,0x0000, // A0 - AF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x00AB,0x0000,0x0000,0x0000,0x0000, // B0 - BF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // C0 - CF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // D0 - DF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // E0 - EF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000  // F0 - FF
    };

    const INT acc_20[256] = // U+20xx
    {
    //0    1      2      3      4      5      6      7      8      9      A      B      C      D      E      F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 00 - 0F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 10 - 1F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 20 - 2F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x203A,0x2039,0x0000,0x0000,0x0000,0x0000,0x0000, // 30 - 3F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x2046,0x2045,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 40 - 4F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 50 - 5F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 60 - 6F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x207E,0x207D,0x0000, // 70 - 7F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x208E,0x208D,0x0000, // 80 - 8F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 90 - 9F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // A0 - AF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // B0 - BF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // C0 - CF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // D0 - DF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // E0 - EF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000  // F0 - FF
    };
    
    const INT acc_22[256] = // U+22xx
    {
    //0    1      2      3      4      5      6      7      8      9      A      B      C      D      E      F
    0x0000,0x2201,0x2202,0x2203,0x2204,0x0000,0x0000,0x0000,0x220B,0x220C,0x220D,0x2208,0x2209,0x220A,0x0000,0x0000, // 00 - 0F
    0x0000,0x2211,0x0000,0x0000,0x0000,0x2216,0x2215,0x0000,0x0000,0x0000,0x221A,0x221B,0x221C,0x221D,0x0000,0x221F, // 10 - 1F
    0x2220,0x2221,0x2222,0x0000,0x2224,0x0000,0x2226,0x0000,0x0000,0x0000,0x0000,0x222B,0x222C,0x222D,0x222E,0x222F, // 20 - 2F
    0x2230,0x2231,0x2232,0x2233,0x0000,0x0000,0x0000,0x0000,0x0000,0x2239,0x0000,0x223B,0x223D,0x223C,0x223E,0x223F, // 30 - 3F
    0x2240,0x2241,0x2242,0x22CD,0x2244,0x2245,0x2246,0x2247,0x2248,0x2249,0x224A,0x224B,0x224C,0x0000,0x0000,0x0000, // 40 - 4F
    0x0000,0x0000,0x2253,0x2252,0x2255,0x2254,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x225F, // 50 - 5F
    0x2260,0x0000,0x2262,0x0000,0x2265,0x2264,0x2267,0x2266,0x2269,0x2268,0x226B,0x226A,0x0000,0x0000,0x226F,0x226E, // 60 - 6F
    0x2271,0x2270,0x2273,0x2272,0x2275,0x2274,0x2277,0x2276,0x2279,0x2278,0x227B,0x227A,0x227D,0x227C,0x227F,0x227E, // 70 - 7F
    0x2281,0x2280,0x2283,0x2282,0x2285,0x2284,0x2287,0x2286,0x2289,0x2288,0x228B,0x228A,0x228C,0x0000,0x0000,0x2290, // 80 - 8F
    0x228F,0x2292,0x2291,0x0000,0x0000,0x0000,0x0000,0x0000,0x2298,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 90 - 9F
    0x0000,0x0000,0x22A3,0x22A2,0x0000,0x0000,0x22A6,0x22A7,0x22A8,0x22A9,0x22AA,0x22AB,0x22AC,0x22AD,0x22AE,0x22AF, // A0 - AF
    0x22B1,0x22B0,0x22B3,0x22B2,0x22B5,0x22B4,0x22B7,0x22B6,0x22B8,0x0000,0x0000,0x0000,0x0000,0x0000,0x22BE,0x22BF, // B0 - BF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x22CA,0x22C9,0x22CC,0x22CB,0x2243,0x0000,0x0000, // C0 - CF
    0x22D1,0x22D0,0x0000,0x0000,0x0000,0x0000,0x22D7,0x22D6,0x22D9,0x22D8,0x22DB,0x22DA,0x22DD,0x22DC,0x22DF,0x22DE, // D0 - DF
    0x22E1,0x22E0,0x22E3,0x22E2,0x22E5,0x22E4,0x22E7,0x22E6,0x22E9,0x22E8,0x22EB,0x22EA,0x22ED,0x22EC,0x0000,0x0000, // E0 - EF
    0x22F1,0x22F0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000  // F0 - FF
    };
    

    const INT acc_23[256] = // U+23xx
    {
    //0    1      2      3      4      5      6      7      8      9      A      B      C      D      E      F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x2309,0x2308,0x230B,0x230A,0x0000,0x0000,0x0000,0x0000, // 00 - 0F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 10 - 1F
    0x2320,0x2321,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x232A,0x2329,0x0000,0x0000,0x0000,0x0000,0x0000, // 20 - 2F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 30 - 3F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 40 - 4F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 50 - 5F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 60 - 6F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 70 - 7F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 80 - 8F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 90 - 9F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // A0 - AF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // B0 - BF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // C0 - CF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // D0 - DF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // E0 - EF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000  // F0 - FF
    };

    const INT acc_30[256] = // U+30xx
    {
    //0    1      2      3      4      5      6      7      8      9      A      B      C      D      E      F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x3009,0x3008,0x300B,0x300A,0x300C,0x300D,0x300E,0x300F, // 00 - 0F
    0x3011,0x3010,0x0000,0x0000,0x3014,0x3015,0x3017,0x3016,0x3019,0x3018,0x301B,0x301A,0x0000,0x0000,0x0000,0x0000, // 10 - 1F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 20 - 2F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 30 - 3F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 40 - 4F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 50 - 5F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 60 - 6F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 70 - 7F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 80 - 8F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // 90 - 9F
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // A0 - AF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // B0 - BF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // C0 - CF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // D0 - DF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000, // E0 - EF
    0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000  // F0 - FF
    };

    const INT * const pccUnicodeLevel1[256] =
    {
    acc_00, NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 00 - 07
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 08 - 0F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 10 - 17
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 18 - 1F
    acc_20, NULL,   acc_22, acc_23, NULL,   NULL,   NULL,   NULL,    // 20 - 27
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 28 - 2F
    acc_30, NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 30 - 37
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 38 - 3F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 40 - 47
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 48 - 4F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 50 - 57
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 58 - 5F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 60 - 67
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 68 - 6F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 70 - 77
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 78 - 7F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 80 - 87
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 88 - 8F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 90 - 97
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // 98 - 9F
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // A0 - A7
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // A8 - AF
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // B0 - B7
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // B8 - BF
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // C0 - C7
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // C8 - CF
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // D0 - D7
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // D8 - DF
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // E0 - E7
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // E8 - EF
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // F0 - F7
    NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,   NULL,    // F8 - FF
    };

//
// GetMirroredCodepoint
//
// if the passed codepoint has a valid mirrored codepoint, it return it.
// otherwise it returns the original passed codepoint.

INT __stdcall
GetMirroredCodepoint(INT codepoint)
{
    if(codepoint > 0xFFFF)
    {
        // no surrogates mirrored codepoint so far
        return codepoint;
    }
    const INT *pcc;
    if(!(pcc = pccUnicodeLevel1[(codepoint & 0xFFFF)>>8]))
    {
        return codepoint;
    }
    
    // No parameter validation for performace.
    INT mirroredCodepoint = pcc[codepoint & 0xff];
    return mirroredCodepoint==0 ? codepoint : mirroredCodepoint;
}
