/***************************************************************************
 *
 *  Copyright (C) 1995-2001 Microsoft Corporation.  All Rights Reserved.
 *
 *  File:       dsoundi.h
 *  Content:    DirectSound internal header
 *  History:
 *   Date       By      Reason
 *   ====       ==      ======
 *  12/27/96    dereks  Created
 *  08/25/99    duganp  Added effects processing for DirectX 8
 *  1999-2001   duganp  Fixes and updates
 *
 ***************************************************************************/

#ifndef __DSOUNDI_H__
#define __DSOUNDI_H__

// Turn off spurious warnings about always true/false conditionals
// generated by some of our validation macros.
#pragma warning(disable:4296)

// We'll ask for what we need, thank you
#ifndef WIN32_LEAN_AND_MEAN
  #define WIN32_LEAN_AND_MEAN
#endif

#ifndef COM_NO_WINDOWS_H
  #define COM_NO_WINDOWS_H
#endif

// Define all flavors of 'WIN32'
#if defined(WIN32) || defined(_WIN32)
  #ifndef WIN32
    #define WIN32
  #endif
  #ifndef _WIN32
    #define _WIN32
  #endif
#endif // defined(WIN32) || defined(_WIN32)

// Define all flavors of 'WIN64'
#if defined(WIN64) || defined(_WIN64)
  #ifndef WIN64
    #define WIN64
  #endif
  #ifndef _WIN64
    #define _WIN64
  #endif
#endif // defined(WIN64) || defined(_WIN64)

// Define all flavors of 'DEBUG'
#ifdef DEBUG
  #ifndef _DEBUG
    #define _DEBUG
  #endif
  #ifndef RDEBUG
    #define RDEBUG
  #endif
  #ifndef DBG
    #define DBG 1
  #endif
#endif // DEBUG

// Either WIN95 or WINNT must always be defined.
// WIN95 really means "any Win9X platform" (including Windows 98 and ME).
// WINNT means "any NT-based platform" including Windows 2000, XP, etc.

#ifdef Not_VxD
  #if defined(WIN95) && defined(WINNT)
    #error Both WIN95 and WINNT defined
  #endif // defined(WIN95) && defined(WINNT)
  #if !defined(WIN95) && !defined(WINNT)
    #error Neither WIN95 nor WINNT defined
  #endif // !defined(WIN95) && !defined(WINNT)
#endif // Not_VxD

// Define or undefine all flavors of UNICODE
#ifdef WINNT
  #ifndef UNICODE
    #define UNICODE
  #endif
  #ifndef _UNICODE
    #define _UNICODE
  #endif
#else
  #undef UNICODE
  #undef _UNICODE
#endif // WINNT

// If we're building the VxD, we're obviously X86
#if !defined(Not_VxD) && !defined(_X86_)
  #define _X86_
#endif

// Can we use inline X86 assembler?  This definition must be before the
// inclusion of runtime.h and any other header files that use USE_INLINE_ASM
// in the future.
#if defined(_X86_) && !defined(WIN64)
  #define USE_INLINE_ASM
#endif

#include <windows.h>
#include <stddef.h>
#include <objbase.h>
#include <mmsystem.h>
#include <mmddkp.h>

#ifndef Not_VxD // If building dsound.vxd:

  #define WANTVXDWRAPS

  #ifdef __cplusplus
    extern "C" {
  #endif // __cplusplus
  #include <vmm.h>
  #include <vwin32.h>
  #include <vxdwraps.h>
  #include <vtd.h>
  #include <vmcpd.h>
  #ifdef __cplusplus
    }
  #endif // __cplusplus

#endif // Not_VxD

#include "dsmemmgr.h"
#include "dsoundp.h"
#include "dsprv.h"

#ifdef Not_VxD // If building dsound.dll:

  #include "debug.h"
  #include "runtime.h"

  #ifdef SHARED
    #include "ddrawp.h"
    #include "w95help.h"
  #endif // SHARED

  #ifndef NOKS
    #include <mmreg.h>      // Need to include mmreg.h before ksmedia.h; otherwise ksmedia.h
    #include <ks.h>         // will not define KSDATAFORMAT_SUBTYPE_IEEE_FLOAT etc.
    #include <ksmedia.h>
    #include <ksmediap.h>
    #include <dmksctrl.h>
  #endif // NOKS

  #ifdef WIN95
    #include "unicode.h"
  #endif // WIN95

  #include <dmusici.h>

  #include "resource.h"
  #include "dsdrvi.h"
  #include "dynaload.h"
  #include "decibels.h"
  #include "misc.h"
  #include "tlist.h"
  #include "vmanpset.h"
  #include "dsbasic.h"
  #include "dsvalid.h"
  #include "synch.h"
  #include "grace.h"
  #include "vad.h"
  #include "miscinl.h"
  #include "dsimp.h"
  #include "dscom.h"
  #include "dsadmin.h"
  #include "pnphlp.h"
  #include "iirlut.h"
  #include "vmaxcoef.h"
  #include "vmaxhead.h"
  #include "reghlp.h"
  #include "ds3d.h"
  #include "pset.h"
  #include "verify.h"
  #include "mxvad.h"
  #include "emvad.h"
  #include "vector.h"
  #include "capteff.h"
  #include "effects.h"
  #include "dsbufcfg.h"
  #include "dmstrm.h"
  #include "dsfd.h"

  #ifdef WINNT
    #define ENABLE_PERFLOG
    #include "perf.h"
  #endif

  #ifndef NOVXD
    #include "vxdvad.h"
    #include "dsvxdhlp.h"
    #include "dsvxd.h"
  #endif // NOVXD

  #ifndef NOKS
    #include "kshlp.h"
    #include "ks3d.h"
    #include "ksvad.h"
    #include "kscap.h"
  #endif // NOKS

  #include "dsaphack.h"
  #include "dsbuf.h"
  #include "dsclock.h"
  #include "dssink.h"
  #include "dsobj.h"
  #include "dsprvobj.h"
  #include "dscap.h"
  #include "ksuserw.h"

#else // !Not_VxD - building dsound.vxd:

  #include "runtime.h"
  #include "dsdrvi.h"
  #include "dsvxdi.h"
  #include "grace.h"

#endif // Not_VxD

#include "dsbnotes.h"

#if defined(Not_VxD) && defined(__cplusplus)
#include "dsimp.cpp"
#include "tlist.cpp"
#include "miscinl.cpp"
#endif // defined(Not_VxD) && defined(__cplusplus)

#endif // __DSOUNDI_H__
