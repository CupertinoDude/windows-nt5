<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:myScript="http://iisue">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-16">
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;<http://www.rsac.org/ratingsv01.html>&quot; l comment &quot;RSACi North America Server&quot; by &quot;inet@microsoft.com <mailto:inet@microsoft.com>&quot; r (n 0 s 0 v 0 l 0))">
<meta name="MS.LOCALE" content="EN-US">
<meta name="MS-IT-LOC" content="Internet Information Services">
<meta name="MS-HAID" content="Configuring_and_Monitoring_Auditing">
<meta name="description" content="Procedural information on how you can use Windows Explorer and the MMC to set audinting policy for specific files or directories and monitor events related to Web server security.">
<title>Configuring and Monitoring Auditing</title><SCRIPT LANGUAGE="JScript" SRC="iishelp.js"></SCRIPT></head>
<body>
<p style="color:red">[This is preliminary documentation and subject to change]</p>
<h1>Configuring and Monitoring Auditing</h1><a name="H1_37709189"></a><p>You can use Windows Explorer, the <a href="gs_iissnapin.htm"><b>IIS snap-in</b></a>, and the Microsoft Management Console (MMC) to monitor
events related to Web server security and to identify security
breaches for specific files or directories. For more information
about auditing, consult your Windows documentation. This topic
includes procedural information for configuring auditing for
directory or file access and server events.</p><p>For more information about IIS logging, see <a href="log_logging.htm"><b>Logging Site Activity</b></a>.</p><h3>Installing the Group Policy snap-in</h3><p>In order to use the auditing features described in these topics,
you will need to install the Group Policy snap-in. This snap-in is
not included in the Computer Management console, and a new console
will have to be created for the Goup Policy snap-in. For more
information about adding MMC snap-ins, see the Windows Whistler
documentation.</p><p> </p><h6><a name="deligateAudit2">To create a new
MMC console and add the Group Policy snap-in</a></h6><ol><li>Click <b>Start</b> and then <b>Run</b>. In the Run dialog box,
type <code><b>mmc</b></code>. This will start a new MMC
console.</li><li>In the <b>File</b> menu, select <b>Add/Remove Snap-in</b>.</li><li>In the <b>Add/Remove Snap-in</b> dialog box, click <b>
Add</b>.</li><li>In the <b>Add Standalone Snap-in</b> dialog box, select <b>
Group Policy</b> from the list of available snap-ins. Click <b>
Add</b>.</li><li>In the <b>Select Group Policy Object</b> dialog box, either
click <b>Finish</b> to audit the local computer, or <b>Browse</b>
to the computer you want to audit.</li><li>If you clicked <b>Browse</b>, proceed to step 7. Otherwise, go
to step 9.</li><li>In the <b>Browse for a Group Policy Object</b> dialog box,
click the <b>Computers</b> tab, click <b>Another computer</b>,
browse to the computer you want to audit, and then click <b>
OK</b>.</li><li>In the <b>Select Group Policy Object</b> dialog box, click <b>
Finish</b>.</li><li>Close the <b>Add Standalone Snap-in</b> dialog box.</li><li>Click <b>OK</b>.</li><li>In the <b>Console</b> menu, select <b>Save</b> to save the new
console to your hard disk. This is the console you will use to
configure the auditing features.</li></ol><p> </p><h6><a name="deligateAudit">To enable another
account to configure auditing</a></h6><p>By default, only members of the Administrators group have
privileges to configure auditing. You can delegate the task of
configuring auditing of server events to another user account. To
enable the account to configure auditing:</p><ol><li>In the group policy console you created, expand the following
menus, in the following order: <b>Computer Configuration</b>, <b>
Windows Settings</b>, <b>Security Settings</b>, <b>Local
Polices</b>, and <b>User Rights Assignment</b>.</li><li>Right-click <b>Manage audit and security log</b> and select <b>
Properties</b>.</li><li>In the <b>Manage auditing and security log</b> dialog box,
click <b>Add</b>. 

<p><img src="note.gif" alt="note"><b>
      Note
      </b>If the <b>Add</b> button is dimmed, clear the <b>
Exclude from local policy</b> check box to activate it.</p>
</li><li>Select the appropriate user or user group from the list and
click <b>Add</b>. Click <b>OK</b>.</li></ol><p> </p><h6><a name="auditset">To audit directory or file
access</a></h6><p>The following auditing features require the NTFS file system.
See <a href="sec_acc_ntfssecfiles.htm"><b>Securing Your Files with NTFS</b></a>.</p><ol><li>Use Windows Explorer to specify the directory or file you want
to audit and open its property sheets.</li><li>Select the <b>Security</b> tab. 

<p><img src="note.gif" alt="note"><b>
      Note
      </b>If you do not see a <b>Security</b> tab, your
server's file system is set to FAT. For information on converting
it to NTFS, see the Windows documentation.</p>
</li><li>Click the <b>Advanced</b> button. In the <b>Advanced Security
Settings</b> dialog box, click the <b>Auditing</b> tab.</li><li>To add a group, user or computer to audit, click <b>Add</b>.
Select a user, contact, group, or computer from the list, and click
<b>OK</b>.</li><li>In the <b>Audit Entry</b> dialog box, under <b>Access</b>
select the appropriate options. For more information on these
options, see the Windows documentation.</li><li>To change the scope of the audited resources, select the
appropriate audit level from the <b>Apply onto</b> drop down list.
For more information on these levels, see the Windows
documentation.</li><li>To audit objects only applicable to the selected scope, select
the <b>Apply these audit entries to objects and/or containers
within this container only</b> check box. Selecting this check box
will stop auditing of objects created within the selected scope
that run outside of that scope.</li></ol><p><b>Notes</b></p><ul><li>Auditing uses computer resources. For optimum server
performance, auditing should be applied as specifically as
possible. For example, if a particular directory has 100 files in
it, and only a few of those files need to be audited, you should
set auditing for those files, rather than for the entire
directory.</li><li>Directory or file access auditing can be configured remotely by
sharing out the directory or file. The remote user can use the
procedure described earlier. For more information about sharing a
directory or file, see the Windows documentation.</li></ul><p> </p><h6>To configure server event auditing</h6> <ol><li>In the group policy console you created, expand the following
menus, in the following order:<b>Computer Configuration</b>, <b>
Windows Settings</b>, <b>Security Settings</b>, <b>Local
Polices</b>, and then, <b>Audit Polices</b>. 

<p><img src="note.gif" alt="note"><b>
      Note
      </b>To configure security policies for the domain on
the primary domain controller (PDC) or backup domain controller
(BDC), click <b>Domain Policies</b> rather than <b>Local
Polices</b>.</p>
</li><li>In the details pane, right-click the event(s) you want to audit
and select <b>Properties</b>. The <b>Audit policy change
Properties</b> dialog box appears.</li><li>Select or clear the appropriate check boxes. For more
information about the auditing options, see the Windows
documentation. 

<p><img src="note.gif" alt="note"><b>
      Note
      </b>If the options are inactivated clear <b>Exclude
from local policy</b> check box to activate them.</p>
</li><li>Click <b>OK</b>.</li></ol><hr class="iis" size="1">
<p align="center"><i><a href="/iishelp/common/colegal.htm">© 1997-2001 Microsoft Corporation. All rights reserved.</a></i></p>
</body>
</html>
