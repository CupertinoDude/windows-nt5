<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:myScript="http://iisue">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-16">
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;<http://www.rsac.org/ratingsv01.html>&quot; l comment &quot;RSACi North America Server&quot; by &quot;inet@microsoft.com <mailto:inet@microsoft.com>&quot; r (n 0 s 0 v 0 l 0))">
<meta name="MS.LOCALE" content="EN-US">
<meta name="MS-IT-LOC" content="Internet Information Services">
<meta name="MS-HAID" content="Converting_Log_Files_to_NCSA_Format">
<meta name="description" content="Procedural information on how to use the convlog utility for converting log files into NCSA Common log file format.">
<title>Converting Log Files to NCSA Format</title><SCRIPT LANGUAGE="JScript" SRC="iishelp.js"></SCRIPT></head>
<body>
<p style="color:red">[This is preliminary documentation and subject to change]</p>
<h1>Converting Log Files to NCSA Format</h1><p>You can use the <b>convlog</b> utility to convert your Web
server's log files to NCSA Common log file format. The converter
can also replace IP addresses with DNS names during conversion of
Microsoft IIS and Extended format log files to NCSA format, or
it can be used to replace IP addresses with DNS names inside an
NCSA log file. Time offsets can also be converted using this
utility.</p><p><img src="note.gif" alt="note"><b>
      Note
      </b>Using this utility with W3C Extended log files that
contain process accounting log information results in the loss of
any Process Accounting information.</p>
<h6>To convert log files to other formats</h6> <p>In a command prompt window, type <b>convlog</b> and one of more
of the following switches.</p><ul><li><b>-i ( i, n , e )</b> Specifies the format type of the input
file. 

<ul><li><b>i</b>  Microsoft IIS log file format</li><li><b>n</b>  NCSA Common log file format</li><li><b>e</b>  W3C Extended log file format</li></ul></li><li><b><i>filename</i>.log</b> Specifies the input file name.</li><li><b>-t (ncsa:GMTOffset)</b> Specifies the output type default as
NCSA Common log file format. 

<ul><li><b>GMTOffset</b>  Offset in hours from Greenwich Mean
Time (GMT). The offset is a four-digit number preceded by a plus or
minus sign, depending on your local time difference from GMT. An
empty space following the GMT offset enables replacement of IP
address by DNS name, for Microsoft IIS log file format only.</li></ul></li><li><b>-l ( 0 , 1 , 2 )</b> Specifies the date format used in a IIS
log input file. The utility accepts whatever format you specify, so
you must determine what format was used in the input file. 

<ul><li><b>0</b> - MM/DD/YY default (U.S. date format)</li><li><b>1</b> - YY/MM/DD (Japanese date format)</li><li><b>2</b> - DD.MM.YY (German date format)</li></ul></li><li><b>-o</b><i>output directory</i>  Specifies the
output directory. The default is the current directory (that is,
%WINNT%\System32).</li><li><b>-x</b>  Saves non-HTTP transaction entries to a
.dmp file.</li><li><b>-d</b>  Enables DNS replacement of user IP address
during the conversion process.</li></ul><p>Examples:</p><p>The command <b>convlog -ii inetsv1.log -d -t ncsa:-0700</b>
converts the Inetsv1.log file to an NCSA Common log file format
with DNS names, corrected for a seven-hour GMT offset.</p><p>The command <b>convlog -ii inetsv1.log -l1 -t ncsa:+0900 -o
\Logfiles\Japan\</b> converts the Inetsv1.log file from an IIS log
file format to an NCSA Common log file format, corrected for a
nine-hour GMT offset (that is, Tokyo time), sets its date to the
Japanese date format, and sends it to the folder named <i>Japan</i>
in the folder named <i>Logfiles</i> on the current drive.</p><p>The command <b>convlog -ie extend1.log -o D:\Temp\NCSALogs</b>
converts the Extend1.log file from W3C Extended log file format to
an NCSA Common log file format and outputs it to the NCSALogs
folder in the D:\Temp directory. The IP addresses are not replaced
by DNS names.</p><p>The command <b>convlog -in ncsa1.log -o -d
\\REMOTE_MACHINE\REMOTE_SHARE\NCSALogs</b> outputs the Ncsa1.log
file in NCSA Common log file format to the NCSALogs folder in the
shared directory of a remote drive. The IP addresses are replaced
by DNS names and there is no file format conversion.</p><p>The file names produced by the DNS conversion process use the
following convention:</p><ul><li>Log files converted to NCSA Common without DNS conversion
retain the original file name and have an .ncsa extension.</li><li>Log files with IP addresses converted to DNS names retain the
original file names with an an .ncsa.dns extension.</li></ul><p>For example, if Inetsv1.log is a log file using the Microsoft
IIS log file format, without DNS conversion, the resulting output
log file is Inetsv1.log.ncsa. However, if you enable the DNS
conversion feature, the resulting output log file is
Inetsv1.log.ncsa.dns.</p><p><b>Related Topics</b></p><ul><li>For descriptions of the available log file formats, see <a href="log_aboutlogging.htm"><b>About Logging Site Activity</b></a>.</li><li>For information on setting W3C Extended logging fields, see <a href="log_customw3c.htm"><b>Customizing W3C Extended Logging</b></a>.</li><li>For information on logging frequency and log size, see <a href="log_savinglogfiles.htm"><b>Saving Log Files</b></a>.</li><li>For a reference list of logging properties, see <a href="ref_we_logging.htm"><b>Logging Properties Reference</b></a>.</li></ul><hr class="iis" size="1">
<p align="center"><i><a href="/iishelp/common/colegal.htm">© 1997-2001 Microsoft Corporation. All rights reserved.</a></i></p>
</body>
</html>
