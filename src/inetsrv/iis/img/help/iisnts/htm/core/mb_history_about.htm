<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:myScript="http://iisue">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-16">
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;<http://www.rsac.org/ratingsv01.html>&quot; l comment &quot;RSACi North America Server&quot; by &quot;inet@microsoft.com <mailto:inet@microsoft.com>&quot; r (n 0 s 0 v 0 l 0))">
<meta name="MS.LOCALE" content="EN-US">
<meta name="MS-IT-LOC" content="Internet Information Services">
<meta name="MS-HAID" content="About_the_Metabase_History_Feature">
<meta name="description" content="Concept of the metabase history feature.">
<title>About the Metabase History Feature</title><SCRIPT LANGUAGE="JScript" SRC="iishelp.js"></SCRIPT></head>
<body>
<p style="color:red">[This is preliminary documentation and subject to change]</p>
<h1>About the Metabase History Feature</h1><p>By marking each new metabase file with a unique version number
and saving a copy of the file in the history folder, the metabase
history feature automatically keeps track of metabase changes that
are saved to disk. Each history file is then available for
restoring the MetaBase.xml and MBSchema.xml files from history,
editing the MetaBase.xml file while IIS is running, and for
troubleshooting event log errors. The metabase history feature is
enabled by default.</p><h2>History Folder</h2><p>The history folder is a file system folder used to store
versioned copies of the MetaBase.xml and MBSchema.xml files. The
default location of the history folder is as follows:</p><p><code>%windir%\system32\inetsrv\history</code></p><p>The location and the name of MetaBase.xml can be changed via a
<a href="mb_sec_renamerelocate.htm"><b>Changing the Location and/or Name of MetaBase.xml</b></a>. If the
location of the MetaBase.xml file is changed, the history folder
must be relocated relative to the MetaBase.xml file's location,
always one level below the folder where the MetaBase.xml file is
stored.</p><p>A history file pair consists of a MetaBase.xml and MBSchema.xml
file of the same major and minor version numbers. The default
setting allows for 10 versioned history file pairs to be stored in
the history folder, but the number of file pairs stored in the
history folder is configurable. However, before increasing the
number of versioned sets of files stored in the history folder, you
should ensure that you have adequate hard disk space on the drive
volume where the history folder is located. (You can estimate
the amount of hard disk space required by multiplying the average
combined file size of MetaBase.xml and MBSchema.xml files by the
number of versions that you want to store in the history folder.)
You should not decrease the <a href="ref_mb_MaxHistoryFiles.htm"><b>MaxHistoryFiles</b></a> value below 10 if the <a href="mb_ewr_ewr.htm"><b>Editing the MetaBase.XML File While IIS Is Running</b></a> is enabled.</p><p>When the in-memory metabase is written to disk, IIS checks to
determine whether the number of history file pairs contained in the
history folder exceeds the value of the <a href="ref_mb_MaxHistoryFiles.htm"><b>MaxHistoryFiles</b></a> property. If
the number of history file pairs exceed the <b>MaxHistoryFiles</b>
value, the oldest history file pair, based on the timestamp value,
is deleted.</p><div><p><b>Related Topics</b></p><ul><li>For information about configuring the metabase history feature,
see <a href="mb_history_ConfigHistory.htm"><b>Configuring the Metabase History Feature</b></a>.</li><li>For information about restoring the MetaBase.xml and/or
MBSchema.xml files from history files, see <a href="mb_rely_reliability.htm"><b>Metabase Reliability</b></a>.</li><li>For more information about editing the MetaBase.xml file while
IIS is running, see <a href="mb_ewr_ewr.htm"><b>Editing the MetaBase.XML File While IIS Is Running</b></a>.</li><li>For information about the event log, search for <code>"event
log"</code> in the Windows online help.</li></ul></div><div class="search-terms">phrase 1, phrase 2, phrase 3</div>
<hr class="iis" size="1">
<p align="center"><i><a href="/iishelp/common/colegal.htm">© 1997-2001 Microsoft Corporation. All rights reserved.</a></i></p>
</body>
</html>
