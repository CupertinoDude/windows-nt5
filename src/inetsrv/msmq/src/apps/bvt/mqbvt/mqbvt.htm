<html>

<head>
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<meta NAME="GENERATOR" CONTENT="Microsoft FrontPage 4.0">
<title>Falbvt Documentation</title>
</head>

<body LINK="#0000ff">
<font SIZE="6"><u><b>

<h1 ALIGN="CENTER"></b></u>Information about MQBVT</h1>
</font>

<p ALIGN="CENTER">[<a href="#Introduction">Introduction</a>] [<a
href="#Supported platforms">Platforms</a>] [<a href="#Supported platforms">Running
MQBVT</a>]
[<a href="#Return Codes">Return Codes</a>] [<a href="#Cluster Support">Cluster Support</a>]</p>

<h2><a name="Introduction">Introduction</a>:<u><b></h2>
</b></u>

<p>MQBVT performs verification of basic MSMQ functionality. It launches 15 threads, each
of which check a particular functionality. The test is very quick, and should complete in
less than two minutes.</p>

<p>The latest binary and source can be found in the NTTest tree.</p>

<u><b>

<h2></b></u><a name="Supported platforms">Supported platforms</a> \ installations<u><b></h2>
</b></u>

<p>MQBVT is expected to run and pass on any installation of MSMQ. Briefly this is:</p>

<blockquote>
  <p><em>Installation</em>: MSMQ 1.0 (234) from NTE CD, (260) from NTOP CD, (290) from SP4</p>
  <p><em>Platforms</em>: Win9X, WinNT 4.0</p>
</blockquote>

<blockquote>
  <p><em>Installation</em>: MSMQ 2.0</p>
  <p><em>Platform</em>: Win2000 (all flavors), Win2000 Cluster</p>
</blockquote>

<p>&nbsp;</p>
<b>

<h2><a name="Running FalBVT">Running MQBVT</a>:</h2>
</b>

<p>MQBVT can be run locally on a single machine or between machines.</p>

<h3><strong>Basic Syntax: MQBVT.EXE -r:&lt;remote-mach&gt; [-i | -s]
[-t:&lt;thread number&gt;] [options ...]</strong></h3>

<blockquote>
  <p> -d         delete static queue.<br>
 -i        Create static queue.<br>
 -v        verbose.<br>
 -r:       &lt;remote machine name ><br>
 -s        Work with the static queue.<br>
 -w:       &lt; Sleep time in sec >  Sleep time wait for replication.<br>
 -C:       run scurity test on NT4 client.<br>
 -RxTime:  &lt; Time in MilliSec >  Receive timeout.<br>
 -timeout: &lt; Time in Sec >  Maximum time to run.<br>
 -delete:  delete the static queue.<br>
 -R        Only Register certificate.<br>
 -DNS      always use full dns name as machines name.<br>
 -NT4      Works against MSMQ1.0 pec.<br>
 -sp6      Enable new tests for msmq in SP6<br>
 -PAUSE    &lt; Time in Sec >  Wait to key press before start to run.<br>
 -t:#number  Specific test number<br>
 -cert     always Create new certificate<br>
 -ddq            don't delete queues after finish<br>
 -install        install Mqbvt service<br>
 -remove         Remove Mqbvt service<br>
 -service  use to pass parmeters to the service</p>
</blockquote>
<h3><br>
Example #1: msmqbvt -i</h3>
<blockquote>
  <p>This command will create the queues to be used in the test - nothing more.
  Use this option in an environment involving replication. Wait through the
  replication interval (to make sure all machines can see the new queues, then
  run MQBVT using the -s option to use the static queues. E.g. MQBVT -r:Eitan5 -s<br>
  </p>
</blockquote>

<h3><strong>Example #2: MQBVT.exe -v -r:eitan1 -t:2</strong> </h3>

<blockquote>
  <p>Will perform a verbose test of the #2 test thread (send-receive to private
  queue) between the
  local machine and a remote machine named &quot;eitan1&quot;</p>
</blockquote>

<h2><a name="Return Codes">Return Codes</a>:</h2>

<blockquote>
  <p>MQBVT.exe exits with these codes.</p>
  <p>0 - Pass</p>
  <p>1 &#150; Fail</p>
</blockquote>

<h2><a name="Cluster Support">Running MQBVT on or against a Cluster</a></h2>

<p>When running MQBVT on a cluster node or against a cluster from a client, specify the
cluster name in the -r parameter. The command line will be identical in all cases:</p>

<blockquote>
  <p><em><strong>MQBVT</strong></em><em><strong> -r&lt;clustername&gt;</strong></em></p>
</blockquote>

<p>For example, consider the scenario that a client is named <strong>MSMQClient</strong>,
and two machines ( named <strong>MSMQNode1</strong> and <strong>MSMQNode2</strong>) form a
cluster named <strong>MSMQCluster</strong>. The following matrix covers all combinations of
machines in the BVT:</p>

<table border="1" width="100%">
  <tr>
    <td width="33%">Client Machine</td>
    <td width="33%">Server Machine</td>
    <td width="34%">Command Line</td>
  </tr>
  <tr>
    <td width="33%"><strong>MSMQClient</strong></td>
    <td width="33%"><strong>MSMQCluster (distributed BVT)</strong></td>
    <td width="34%">MQBVT -r<strong>MSMQCluster</strong></td>
  </tr>
  <tr>
    <td width="33%"><strong>MSMQNode1</strong></td>
    <td width="33%"><strong>MSMQCluster (local BVT)</strong></td>
    <td width="34%">MQBVT -r<strong>MSMQCluster</strong></td>
  </tr>
  <tr>
    <td width="33%"><strong>MSMQNode2</strong></td>
    <td width="33%"><strong>MSMQCluster (local BVT)</strong></td>
    <td width="34%">MQBVT -r<strong>MSMQCluster</strong></td>
  </tr>
</table>

<p>For more information:</p>

<p>Mail to: <a HREF="mailto:eitank@Microsoft.com"><font SIZE="2">eitank@Microsoft.com</font></a></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
</body>
</html>
